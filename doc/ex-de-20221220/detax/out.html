<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-01-10 Tue 16:45 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Wong Meng Weng" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org46e5b68">1. the sum of all positive elements, ignoring negative elements</a></li>
<li><a href="#orga85877d">2. xplainF</a>
<ul>
<li><a href="#orgd79e5da">2.1. toplevel: val = -3.0</a></li>
<li><a href="#orga60b640">2.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#orga7af743">2.3. toplevel: log = []</a></li>
<li><a href="#orga059e46">2.4. toplevel: xpl = -3.0</a>
<ul>
<li><a href="#org5fc1002">2.4.1. -3.0 = sum of 2 elements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgcc1fd9f">3. the product of the doubles of all positive elements, ignoring negative and zero elements</a></li>
<li><a href="#org56d0cdf">4. xplainF</a>
<ul>
<li><a href="#org248de2c">4.1. toplevel: val = 48.0</a></li>
<li><a href="#org68e1f63">4.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#orgac55c1c">4.3. toplevel: log = []</a></li>
<li><a href="#org5f1469d">4.4. toplevel: xpl = 48.0</a>
<ul>
<li><a href="#orgabcc033">4.4.1. 48.0 = product of 3 elements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org72f50f5">5. the product of the doubles of all positive elements and the unchanged original values of all negative elements</a></li>
<li><a href="#org94c7544">6. xplainF</a>
<ul>
<li><a href="#org3fbe915">6.1. toplevel: val = 96.0</a></li>
<li><a href="#org2c98613">6.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#orge6ceafe">6.3. toplevel: log = []</a></li>
<li><a href="#org7a3e761">6.4. toplevel: xpl = 96.0</a>
<ul>
<li><a href="#orgdc3fc8b">6.4.1. 96.0 = product of 5 elements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgcb9e1e4">7. calculate net income</a></li>
<li><a href="#org8200b96">8. addCol net income</a>
<ul>
<li><a href="#orga7cbed7">8.1. adding 1 new column ("net income") with 8 rows</a>
<ul>
<li><a href="#org74ef52c">8.1.1. Agriculture = 300000.0</a></li>
<li><a href="#org3f6a1dd">8.1.2. Capital = 0.0</a></li>
<li><a href="#orge5c2210">8.1.3. Employment = 0.0</a></li>
<li><a href="#orgffd7c7a">8.1.4. Exempt Capital = 200.0</a></li>
<li><a href="#org6ba188b">8.1.5. Independent = -6000.0</a></li>
<li><a href="#org56e231b">8.1.6. Other = -100000.0</a></li>
<li><a href="#orgf1076d5">8.1.7. Rents = 70000.0</a></li>
<li><a href="#org12519cb">8.1.8. Trade = 0.0</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org704d61b">9. what is the positive sum of the incomes?</a></li>
<li><a href="#org3f9c2d4">10. xplainF</a>
<ul>
<li><a href="#org9c8245e">10.1. toplevel: val = 370200.0</a></li>
<li><a href="#org8b1ac11">10.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#org947ce44">10.3. toplevel: log = []</a></li>
<li><a href="#org938da40">10.4. toplevel: xpl = 370200.0</a>
<ul>
<li><a href="#org4829748">10.4.1. 370200.0 = sum of 3 elements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orga385423">11. what is the negative sum of the incomes?</a></li>
<li><a href="#org180afe5">12. xplainF</a>
<ul>
<li><a href="#org120236f">12.1. toplevel: val = -106000.0</a></li>
<li><a href="#org7dcbce6">12.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#orgb87d924">12.3. toplevel: log = []</a></li>
<li><a href="#org0e24b9d">12.4. toplevel: xpl = -106000.0</a>
<ul>
<li><a href="#org2e6cdc7">12.4.1. -106000.0 = sum of 2 elements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org7b0eb5b">13. if the positive sum is greater than 100000, the maximum reduction is half of the negative sum; otherwise it is the entire negative sum</a></li>
<li><a href="#orgfaf29b6">14. xplainF</a>
<ul>
<li><a href="#orgc6a3818">14.1. toplevel: val = -53000.0</a></li>
<li><a href="#org63321cb">14.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#orga9402cf">14.3. toplevel: log = []</a></li>
<li><a href="#orgb20e0f5">14.4. toplevel: xpl = -53000.0</a>
<ul>
<li><a href="#org8cffab1">14.4.1. if PredComp CGT (Val 370200.0) (Val 100000.0) then MathBin Divide (Val (-106000.0)) (Val 2.0) else Val (-106000.0)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orga274f27">15. the maximum amount by which we can reduce the positive sum is -53000.0</a></li>
<li><a href="#org5650791">16. xplainF</a>
<ul>
<li><a href="#org6fc01b7">16.1. toplevel: val = 0.0</a></li>
<li><a href="#orgffbbe8b">16.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#orgdbdc288">16.3. toplevel: log = []</a></li>
<li><a href="#orgfff1672">16.4. toplevel: xpl = 0.0</a>
<ul>
<li><a href="#orgb61f054">16.4.1. 0.0 = max of 2 elements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6094042">17. the amount by which we can shrink the negative sum is 0.0</a></li>
<li><a href="#org39d9a68">18. now we prorata reduce both the positive and the negative incomes, by type</a></li>
<li><a href="#org7a63d4a">19. xplainF</a>
<ul>
<li><a href="#orgc0ab008">19.1. toplevel: val = [342949.75,0.0,0.0,228.63316,-6000.0,-100000.0,80021.61,0.0]</a></li>
<li><a href="#org214b70b">19.2. toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</a></li>
<li><a href="#orgd6d0292">19.3. toplevel: log = []</a></li>
<li><a href="#org7b3a921">19.4. toplevel: xpl = [342949.75,0.0,0.0,228.63316,-6000.0,-100000.0,80021.61,0.0]</a>
<ul>
<li><a href="#org1a5f948">19.4.1. deep evaluation to floats</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgde527b1">20. we have a new column "reduction"</a></li>
<li><a href="#org30ae5ba">21. Scenarios</a></li>
<li><a href="#org4fe353a">22. running scenario: 1a</a>
<ul>
<li><a href="#orgb0c50bb">22.1. executing section 2.3</a>
<ul>
<li><a href="#org86115f7">22.1.1. step 1</a></li>
<li><a href="#orgf2689a1">22.1.2. step 2</a></li>
<li><a href="#org649ce11">22.1.3. step 3</a></li>
<li><a href="#orgde53af7">22.1.4. step 4</a></li>
<li><a href="#org4483b35">22.1.5. step 5</a></li>
<li><a href="#org214006a">22.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org7454634">22.2. explaining section<sub>2</sub><sub>3</sub>: 1a</a></li>
<li><a href="#org7c1769c">22.3. executing section<sub>34</sub><sub>1</sub>: 1a</a></li>
<li><a href="#orgafc5361">22.4. executing section 34.1</a>
<ul>
<li><a href="#org9ee7a9f">22.4.1. step 1</a></li>
<li><a href="#orgb8be8d4">22.4.2. step 2</a></li>
<li><a href="#orgf174a09">22.4.3. step 3</a></li>
<li><a href="#orgc4f4ec6">22.4.4. step 4</a></li>
<li><a href="#org4fbd0ae">22.4.5. step 5</a></li>
<li><a href="#orgfdfc472">22.4.6. step 6</a></li>
<li><a href="#orgf195d85">22.4.7. step 7</a></li>
<li><a href="#org925561e">22.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgce5059f">23. running scenario: 1b</a>
<ul>
<li><a href="#org577a461">23.1. executing section 2.3</a>
<ul>
<li><a href="#orgc3b47be">23.1.1. step 1</a></li>
<li><a href="#orgca3a947">23.1.2. step 2</a></li>
<li><a href="#org8efabe0">23.1.3. step 3</a></li>
<li><a href="#orgc9609f3">23.1.4. step 4</a></li>
<li><a href="#org3c0988d">23.1.5. step 5</a></li>
<li><a href="#orgce49c4a">23.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org70067c1">23.2. explaining section<sub>2</sub><sub>3</sub>: 1b</a></li>
<li><a href="#org74c1a97">23.3. executing section<sub>34</sub><sub>1</sub>: 1b</a></li>
<li><a href="#orgf7d7576">23.4. executing section 34.1</a>
<ul>
<li><a href="#org9dcf420">23.4.1. step 1</a></li>
<li><a href="#orge4e0f36">23.4.2. step 2</a></li>
<li><a href="#org9f1db07">23.4.3. step 3</a></li>
<li><a href="#orga1fdb82">23.4.4. step 4</a></li>
<li><a href="#org418af04">23.4.5. step 5</a></li>
<li><a href="#org25032fb">23.4.6. step 6</a></li>
<li><a href="#orge43d0c7">23.4.7. step 7</a></li>
<li><a href="#orgcd8c519">23.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org92a00b6">24. running scenario: 2</a>
<ul>
<li><a href="#orgc6e736a">24.1. executing section 2.3</a>
<ul>
<li><a href="#orgcd5fe7e">24.1.1. step 1</a></li>
<li><a href="#org70e789e">24.1.2. step 2</a></li>
<li><a href="#orgac47c26">24.1.3. step 3</a></li>
<li><a href="#org7b6db33">24.1.4. step 4</a></li>
<li><a href="#org695eb2c">24.1.5. step 5</a></li>
<li><a href="#org68f245a">24.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org71ac085">24.2. explaining section<sub>2</sub><sub>3</sub>: 2</a></li>
<li><a href="#orgd511679">24.3. executing section<sub>34</sub><sub>1</sub>: 2</a></li>
<li><a href="#orgb5f90b1">24.4. executing section 34.1</a>
<ul>
<li><a href="#org092d3dd">24.4.1. step 1</a></li>
<li><a href="#org090b429">24.4.2. step 2</a></li>
<li><a href="#orge8dade8">24.4.3. step 3</a></li>
<li><a href="#orgab8bcc3">24.4.4. step 4</a></li>
<li><a href="#org0ef157a">24.4.5. step 5</a></li>
<li><a href="#org1cedf58">24.4.6. step 6</a></li>
<li><a href="#org11309c0">24.4.7. step 7</a></li>
<li><a href="#orgd7d3c9e">24.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5b3c587">25. running scenario: test case 1</a>
<ul>
<li><a href="#orga957240">25.1. executing section 2.3</a>
<ul>
<li><a href="#org1cc1a5b">25.1.1. step 1</a></li>
<li><a href="#org78bf2ab">25.1.2. step 2</a></li>
<li><a href="#org438ce7c">25.1.3. step 3</a></li>
<li><a href="#org5a1128e">25.1.4. step 4</a></li>
<li><a href="#org3427169">25.1.5. step 5</a></li>
<li><a href="#orgcb7dfbc">25.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org279b878">25.2. explaining section<sub>2</sub><sub>3</sub>: test case 1</a></li>
<li><a href="#org56a725c">25.3. executing section<sub>34</sub><sub>1</sub>: test case 1</a></li>
<li><a href="#org6ac8edc">25.4. executing section 34.1</a>
<ul>
<li><a href="#org413dd84">25.4.1. step 1</a></li>
<li><a href="#orgb685652">25.4.2. step 2</a></li>
<li><a href="#org9dc80a9">25.4.3. step 3</a></li>
<li><a href="#orgd3474eb">25.4.4. step 4</a></li>
<li><a href="#org36b60c5">25.4.5. step 5</a></li>
<li><a href="#org6cc15dd">25.4.6. step 6</a></li>
<li><a href="#org5276486">25.4.7. step 7</a></li>
<li><a href="#org95d98b6">25.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org0f0a606">26. running scenario: test case 2</a>
<ul>
<li><a href="#org363d37b">26.1. executing section 2.3</a>
<ul>
<li><a href="#org7d785f4">26.1.1. step 1</a></li>
<li><a href="#org5189a3e">26.1.2. step 2</a></li>
<li><a href="#org7aa1508">26.1.3. step 3</a></li>
<li><a href="#org21c1601">26.1.4. step 4</a></li>
<li><a href="#org0564e58">26.1.5. step 5</a></li>
<li><a href="#orgf50d430">26.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org8dd7712">26.2. explaining section<sub>2</sub><sub>3</sub>: test case 2</a></li>
<li><a href="#orgb7972e8">26.3. executing section<sub>34</sub><sub>1</sub>: test case 2</a></li>
<li><a href="#org2b548cf">26.4. executing section 34.1</a>
<ul>
<li><a href="#org3f2a459">26.4.1. step 1</a></li>
<li><a href="#org009ad68">26.4.2. step 2</a></li>
<li><a href="#org9d5029d">26.4.3. step 3</a></li>
<li><a href="#orge34d815">26.4.4. step 4</a></li>
<li><a href="#org0b1c684">26.4.5. step 5</a></li>
<li><a href="#org71bffa4">26.4.6. step 6</a></li>
<li><a href="#org89e796f">26.4.7. step 7</a></li>
<li><a href="#org31d28c3">26.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgad54e63">27. running scenario: test case 3</a>
<ul>
<li><a href="#orgdf03ca0">27.1. executing section 2.3</a>
<ul>
<li><a href="#org24a33b9">27.1.1. step 1</a></li>
<li><a href="#org1f76230">27.1.2. step 2</a></li>
<li><a href="#org5ca5eb6">27.1.3. step 3</a></li>
<li><a href="#orgd03661b">27.1.4. step 4</a></li>
<li><a href="#org7acc2d7">27.1.5. step 5</a></li>
<li><a href="#orgb8521c1">27.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org77f10b7">27.2. explaining section<sub>2</sub><sub>3</sub>: test case 3</a></li>
<li><a href="#org5c274bf">27.3. executing section<sub>34</sub><sub>1</sub>: test case 3</a></li>
<li><a href="#orge201d45">27.4. executing section 34.1</a>
<ul>
<li><a href="#org16442cc">27.4.1. step 1</a></li>
<li><a href="#orgdacbd21">27.4.2. step 2</a></li>
<li><a href="#org0bd855c">27.4.3. step 3</a></li>
<li><a href="#orgbfdc053">27.4.4. step 4</a></li>
<li><a href="#org1d3ef7e">27.4.5. step 5</a></li>
<li><a href="#orga5b2c28">27.4.6. step 6</a></li>
<li><a href="#org3c875ab">27.4.7. step 7</a></li>
<li><a href="#org56be61b">27.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc7f2d2c">28. running scenario: test case 3 - fired</a>
<ul>
<li><a href="#org0a546d7">28.1. executing section 2.3</a>
<ul>
<li><a href="#org8e350b3">28.1.1. step 1</a></li>
<li><a href="#orga5cffe9">28.1.2. step 2</a></li>
<li><a href="#orgfb407e5">28.1.3. step 3</a></li>
<li><a href="#org594139d">28.1.4. step 4</a></li>
<li><a href="#org93b163e">28.1.5. step 5</a></li>
<li><a href="#org1aa3fcc">28.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org92f0838">28.2. explaining section<sub>2</sub><sub>3</sub>: test case 3 - fired</a></li>
<li><a href="#org90dff37">28.3. executing section<sub>34</sub><sub>1</sub>: test case 3 - fired</a></li>
<li><a href="#orga4d40ee">28.4. executing section 34.1</a>
<ul>
<li><a href="#org12607b2">28.4.1. step 1</a></li>
<li><a href="#org4ec17e0">28.4.2. step 2</a></li>
<li><a href="#org7234585">28.4.3. step 3</a></li>
<li><a href="#orgd7a873e">28.4.4. step 4</a></li>
<li><a href="#orgfffaf76">28.4.5. step 5</a></li>
<li><a href="#org5b0ee21">28.4.6. step 6</a></li>
<li><a href="#org0c18dd7">28.4.7. step 7</a></li>
<li><a href="#org3112230">28.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org73bca46">29. running scenario: test case 3 - unfired</a>
<ul>
<li><a href="#org4bd4d70">29.1. executing section 2.3</a>
<ul>
<li><a href="#org724b58d">29.1.1. step 1</a></li>
<li><a href="#org525b557">29.1.2. step 2</a></li>
<li><a href="#org839c3f8">29.1.3. step 3</a></li>
<li><a href="#org2b1645b">29.1.4. step 4</a></li>
<li><a href="#orgc38ef78">29.1.5. step 5</a></li>
<li><a href="#org35069ec">29.1.6. step 6</a></li>
</ul>
</li>
<li><a href="#org788a264">29.2. explaining section<sub>2</sub><sub>3</sub>: test case 3 - unfired</a></li>
<li><a href="#orgab39ef2">29.3. executing section<sub>34</sub><sub>1</sub>: test case 3 - unfired</a></li>
<li><a href="#orgf70e51a">29.4. executing section 34.1</a>
<ul>
<li><a href="#org62adfdd">29.4.1. step 1</a></li>
<li><a href="#orgc248fb6">29.4.2. step 2</a></li>
<li><a href="#orgddb69d1">29.4.3. step 3</a></li>
<li><a href="#org7b80bec">29.4.4. step 4</a></li>
<li><a href="#org79740eb">29.4.5. step 5</a></li>
<li><a href="#orgf142da4">29.4.6. step 6</a></li>
<li><a href="#orgb86c329">29.4.7. step 7</a></li>
<li><a href="#org0933668">29.4.8. step 8</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org7bf7f6e">30. which tax method shall we use to deal with extraordinary income in test case 3?</a>
<ul>
<li><a href="#orgdc46901">30.1. executing section 34.1</a>
<ul>
<li><a href="#org79b947d">30.1.1. step 1</a></li>
<li><a href="#orgac01496">30.1.2. step 2</a></li>
<li><a href="#org083d128">30.1.3. step 3</a></li>
<li><a href="#org4bfeaf0">30.1.4. step 4</a></li>
<li><a href="#org876e79a">30.1.5. step 5</a></li>
<li><a href="#org432bb56">30.1.6. step 6</a></li>
<li><a href="#org39221fb">30.1.7. step 7</a></li>
<li><a href="#org28264d0">30.1.8. step 8</a></li>
</ul>
</li>
<li><a href="#org7756bd8">30.2. executing section 34.1</a>
<ul>
<li><a href="#org3e1d5fa">30.2.1. step 1</a></li>
<li><a href="#orgc358298">30.2.2. step 2</a></li>
<li><a href="#org5fde2ae">30.2.3. step 3</a></li>
<li><a href="#orgc85b9f3">30.2.4. step 4</a></li>
<li><a href="#org6f16185">30.2.5. step 5</a></li>
<li><a href="#org1b88227">30.2.6. step 6</a></li>
<li><a href="#orgc3de824">30.2.7. step 7</a></li>
<li><a href="#org6ac288d">30.2.8. step 8</a></li>
</ul>
</li>
<li><a href="#org6f2cf21">30.3. executing section 2.3</a>
<ul>
<li><a href="#org9a5990b">30.3.1. step 1</a></li>
<li><a href="#org3e4df48">30.3.2. step 2</a></li>
<li><a href="#org5679544">30.3.3. step 3</a></li>
<li><a href="#orgaf98a7d">30.3.4. step 4</a></li>
<li><a href="#org3df751e">30.3.5. step 5</a></li>
<li><a href="#org400e4a8">30.3.6. step 6</a></li>
</ul>
</li>
<li><a href="#org3cdb5b3">30.4. executing section 2.3</a>
<ul>
<li><a href="#org1236d68">30.4.1. step 1</a></li>
<li><a href="#org7d4f480">30.4.2. step 2</a></li>
<li><a href="#orgb0d1f92">30.4.3. step 3</a></li>
<li><a href="#org4c038ed">30.4.4. step 4</a></li>
<li><a href="#org6e36051">30.4.5. step 5</a></li>
<li><a href="#org55dffcf">30.4.6. step 6</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2816988">31. we choose EOFifth</a></li>
</ul>
</div>
</div>
<div id="outline-container-org46e5b68" class="outline-2">
<h2 id="org46e5b68"><span class="section-number-2">1</span> the sum of all positive elements, ignoring negative elements</h2>
</div>
<div id="outline-container-orga85877d" class="outline-2">
<h2 id="orga85877d"><span class="section-number-2">2</span> xplainF</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">ListFold</span> <span style="color: #7CB8BB;">FoldSum</span> (<span style="color: #7CB8BB;">ListFilt</span> (<span style="color: #7CB8BB;">Val</span> 0.0) <span style="color: #7CB8BB;">CGT</span> (<span style="color: #7CB8BB;">MathList</span> [<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>2.0),<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>1.0),<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 1.0,<span style="color: #7CB8BB;">Val</span> 2.0,<span style="color: #7CB8BB;">Val</span> 3.0]))
</pre>
</div>
</div>
<div id="outline-container-orgd79e5da" class="outline-3">
<h3 id="orgd79e5da"><span class="section-number-3">2.1</span> toplevel: val = -3.0</h3>
</div>
<div id="outline-container-orga60b640" class="outline-3">
<h3 id="orga60b640"><span class="section-number-3">2.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-orga7af743" class="outline-3">
<h3 id="orga7af743"><span class="section-number-3">2.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-orga059e46" class="outline-3">
<h3 id="orga059e46"><span class="section-number-3">2.4</span> toplevel: xpl = -3.0</h3>
<div class="outline-text-3" id="text-2-4">
</div>
<div id="outline-container-org5fc1002" class="outline-4">
<h4 id="org5fc1002"><span class="section-number-4">2.4.1</span> -3.0 = sum of 2 elements</h4>
<div class="outline-text-4" id="text-2-4-1">
<ul class="org-ul">
<li>-2.0</li>
<li>-1.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org2b44670"></a>2 elements were reduced from an original 6<br />
<div class="outline-text-5" id="text-2-4-1-1">
<ul class="org-ul">
<li>-2.0</li>
<li>-1.0</li>
<li>0.0</li>
<li>1.0</li>
<li>2.0</li>
<li>3.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org7bc39b1"></a>included Val (-2.0) due to passing comparison test<br />
<div class="outline-text-6" id="text-2-4-1-1-1">
<pre class="example" id="org293ef0d">
Val (-2.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="orgc333f9f"></a>True is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgb3672f6"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-1-1-1">
<pre class="example" id="orgc743766">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org084f535"></a>with<br /></li>


<li><a id="orgd1e09d2"></a>-2.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-1-1-3">
<pre class="example" id="org89266f2">
toplevel / listfold sum / comparison &gt;: -2.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org6c1a0e8"></a>included Val (-1.0) due to passing comparison test<br />
<div class="outline-text-6" id="text-2-4-1-1-2">
<pre class="example" id="org13bc995">
Val (-1.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="org4b0a779"></a>True is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org58f08b3"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-2-1-1">
<pre class="example" id="org193ee23">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org6810333"></a>with<br /></li>


<li><a id="orgfb17a50"></a>-1.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-2-1-3">
<pre class="example" id="orgefd2b82">
toplevel / listfold sum / comparison &gt;: -1.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org830740b"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-2-4-1-1-3">
<pre class="example" id="org86e2832">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgb4dea51"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgab26fbd"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-3-1-1">
<pre class="example" id="orgc236755">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org1a7cadc"></a>with<br /></li>


<li><a id="orgd71222a"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-3-1-3">
<pre class="example" id="orgb4c8e35">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org66cd8ce"></a>excluded Val 1.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-2-4-1-1-4">
<pre class="example" id="org13a3737">
Val 1.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orga6f95a7"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org6bc5cb5"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-4-1-1">
<pre class="example" id="org16366fe">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orga079108"></a>with<br /></li>


<li><a id="org3b343d9"></a>1.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-4-1-3">
<pre class="example" id="org93b7bbf">
toplevel / listfold sum / comparison &gt;: 1.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org83bfc30"></a>excluded Val 2.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-2-4-1-1-5">
<pre class="example" id="org30431d2">
Val 2.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org138bb19"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgab4b706"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-5-1-1">
<pre class="example" id="org191db37">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org3dbc24c"></a>with<br /></li>


<li><a id="orgf0591d6"></a>2.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-5-1-3">
<pre class="example" id="orgccc1a1d">
toplevel / listfold sum / comparison &gt;: 2.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org56cf792"></a>excluded Val 3.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-2-4-1-1-6">
<pre class="example" id="org5108e62">
Val 3.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org52cee51"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org0cbecfe"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-6-1-1">
<pre class="example" id="org1190acb">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orgc42065b"></a>with<br /></li>


<li><a id="org2826bf9"></a>3.0: a leaf value<br />
<div class="outline-text-8" id="text-2-4-1-1-6-1-3">
<pre class="example" id="org7dd33af">
toplevel / listfold sum / comparison &gt;: 3.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>




<li><a id="org6fac259"></a>-2.0: a leaf value<br />
<div class="outline-text-5" id="text-2-4-1-2">
<pre class="example" id="org363e0d8">
toplevel / listfold sum: -2.0
</pre>
</div>
</li>

<li><a id="orgf0806cb"></a>-1.0: a leaf value<br />
<div class="outline-text-5" id="text-2-4-1-3">
<pre class="example" id="org45ba6bb">
toplevel / listfold sum: -1.0
</pre>
</div>
</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-orgcc1fd9f" class="outline-2">
<h2 id="orgcc1fd9f"><span class="section-number-2">3</span> the product of the doubles of all positive elements, ignoring negative and zero elements</h2>
</div>
<div id="outline-container-org56d0cdf" class="outline-2">
<h2 id="org56d0cdf"><span class="section-number-2">4</span> xplainF</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">ListFold</span> <span style="color: #7CB8BB;">FoldProduct</span> (<span style="color: #7CB8BB;">ListMap</span> (<span style="color: #7CB8BB;">MathSection</span> <span style="color: #7CB8BB;">Times</span> (<span style="color: #7CB8BB;">Val</span> 2.0)) (<span style="color: #7CB8BB;">ListFilt</span> (<span style="color: #7CB8BB;">Val</span> 0.0) <span style="color: #7CB8BB;">CLT</span> (<span style="color: #7CB8BB;">MathList</span> [<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>2.0),<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>1.0),<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 1.0,<span style="color: #7CB8BB;">Val</span> 2.0,<span style="color: #7CB8BB;">Val</span> 3.0])))
</pre>
</div>
</div>
<div id="outline-container-org248de2c" class="outline-3">
<h3 id="org248de2c"><span class="section-number-3">4.1</span> toplevel: val = 48.0</h3>
</div>
<div id="outline-container-org68e1f63" class="outline-3">
<h3 id="org68e1f63"><span class="section-number-3">4.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-orgac55c1c" class="outline-3">
<h3 id="orgac55c1c"><span class="section-number-3">4.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-org5f1469d" class="outline-3">
<h3 id="org5f1469d"><span class="section-number-3">4.4</span> toplevel: xpl = 48.0</h3>
<div class="outline-text-3" id="text-4-4">
</div>
<div id="outline-container-orgabcc033" class="outline-4">
<h4 id="orgabcc033"><span class="section-number-4">4.4.1</span> 48.0 = product of 3 elements</h4>
<div class="outline-text-4" id="text-4-4-1">
<ul class="org-ul">
<li>2.0</li>
<li>4.0</li>
<li>6.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org58ce1af"></a>fmap mathsection TimesVal 2.0 over 3 elements<br />
<ol class="org-ol">
<li><a id="org962df23"></a>3 elements were reduced from an original 6<br />
<div class="outline-text-6" id="text-4-4-1-1-1">
<ul class="org-ul">
<li>-2.0</li>
<li>-1.0</li>
<li>0.0</li>
<li>1.0</li>
<li>2.0</li>
<li>3.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org2a08b95"></a>excluded Val (-2.0) due to failing comparison test<br />
<div class="outline-text-7" id="text-4-4-1-1-1-1">
<pre class="example" id="org8338803">
Val (-2.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="org40eff30"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orge9d4727"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-1-1-1">
<pre class="example" id="org0961213">
toplevel / listfold product / fmap mathsection / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org70b4ccc"></a>with<br /></li>


<li><a id="orgc506e88"></a>-2.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-1-1-3">
<pre class="example" id="org84e0efa">
toplevel / listfold product / fmap mathsection / comparison &lt;: -2.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orga44ffbb"></a>excluded Val (-1.0) due to failing comparison test<br />
<div class="outline-text-7" id="text-4-4-1-1-1-2">
<pre class="example" id="org9441b58">
Val (-1.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="orgea323c8"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org4034fc0"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-2-1-1">
<pre class="example" id="orgb32e9e2">
toplevel / listfold product / fmap mathsection / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org277ecca"></a>with<br /></li>


<li><a id="org35b65d5"></a>-1.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-2-1-3">
<pre class="example" id="org55cec3c">
toplevel / listfold product / fmap mathsection / comparison &lt;: -1.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org20c2e71"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-7" id="text-4-4-1-1-1-3">
<pre class="example" id="orgf32ddc4">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orga85be30"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org6bdb367"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-3-1-1">
<pre class="example" id="org8a0b885">
toplevel / listfold product / fmap mathsection / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org5b495f9"></a>with<br /></li>


<li><a id="org0a2269a"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-3-1-3">
<pre class="example" id="org531d6f5">
toplevel / listfold product / fmap mathsection / comparison &lt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org59f1190"></a>included Val 1.0 due to passing comparison test<br />
<div class="outline-text-7" id="text-4-4-1-1-1-4">
<pre class="example" id="org0375fb7">
Val 1.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgbb9b1ef"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org12340ca"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-4-1-1">
<pre class="example" id="org305d683">
toplevel / listfold product / fmap mathsection / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orgdd43dbd"></a>with<br /></li>


<li><a id="org8d122e0"></a>1.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-4-1-3">
<pre class="example" id="orgaf8d463">
toplevel / listfold product / fmap mathsection / comparison &lt;: 1.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orgf50d980"></a>included Val 2.0 due to passing comparison test<br />
<div class="outline-text-7" id="text-4-4-1-1-1-5">
<pre class="example" id="org6de3f49">
Val 2.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org2629e36"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org7c09a2e"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-5-1-1">
<pre class="example" id="orgef81d80">
toplevel / listfold product / fmap mathsection / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orge8ed772"></a>with<br /></li>


<li><a id="orgcbb139f"></a>2.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-5-1-3">
<pre class="example" id="org2913eb9">
toplevel / listfold product / fmap mathsection / comparison &lt;: 2.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org5fb3dd1"></a>included Val 3.0 due to passing comparison test<br />
<div class="outline-text-7" id="text-4-4-1-1-1-6">
<pre class="example" id="org39512ce">
Val 3.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org9ec451a"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org12f804b"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-6-1-1">
<pre class="example" id="org3866c3f">
toplevel / listfold product / fmap mathsection / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org282fe22"></a>with<br /></li>


<li><a id="org9944e40"></a>3.0: a leaf value<br />
<div class="outline-text-9" id="text-4-4-1-1-1-6-1-3">
<pre class="example" id="org8d37763">
toplevel / listfold product / fmap mathsection / comparison &lt;: 3.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>





<li><a id="org6e33d26"></a>2.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-4-4-1-2">
<pre class="example" id="orga2d9a99">
toplevel / listfold product / multiplication: 2.0
2.0
toplevel / listfold product / multiplication: 1.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org331e3c2"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-4-4-1-2-1">
<pre class="example" id="orgeb0328d">
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>

<li><a id="org68707a6"></a>by<br /></li>


<li><a id="orga0f3f68"></a>1.0: a leaf value<br />
<div class="outline-text-6" id="text-4-4-1-2-3">
<pre class="example" id="org9e2e362">
2.0
toplevel / listfold product / multiplication: 1.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org2456038"></a>4.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-4-4-1-3">
<pre class="example" id="orgf2286f0">
toplevel / listfold product / multiplication: 2.0
2.0
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orge44e892"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-4-4-1-3-1">
<pre class="example" id="org54ba02a">
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>

<li><a id="org8555573"></a>by<br /></li>


<li><a id="orgdb665e2"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-4-4-1-3-3">
<pre class="example" id="orgf6f726c">
2.0
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org045c7a4"></a>6.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-4-4-1-4">
<pre class="example" id="org0939d57">
toplevel / listfold product / multiplication: 2.0
2.0
toplevel / listfold product / multiplication: 3.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgdef9e9c"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-4-4-1-4-1">
<pre class="example" id="org6dc8bd6">
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>

<li><a id="org22994b0"></a>by<br /></li>


<li><a id="org328c4ef"></a>3.0: a leaf value<br />
<div class="outline-text-6" id="text-4-4-1-4-3">
<pre class="example" id="org98d99dc">
2.0
toplevel / listfold product / multiplication: 3.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>



<div id="outline-container-org72f50f5" class="outline-2">
<h2 id="org72f50f5"><span class="section-number-2">5</span> the product of the doubles of all positive elements and the unchanged original values of all negative elements</h2>
</div>
<div id="outline-container-org94c7544" class="outline-2">
<h2 id="org94c7544"><span class="section-number-2">6</span> xplainF</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">ListFold</span> <span style="color: #7CB8BB;">FoldProduct</span> (<span style="color: #7CB8BB;">ListMapIf</span> (<span style="color: #7CB8BB;">MathSection</span> <span style="color: #7CB8BB;">Times</span> (<span style="color: #7CB8BB;">Val</span> 2.0)) (<span style="color: #7CB8BB;">Val</span> 0.0) <span style="color: #7CB8BB;">CLT</span> (<span style="color: #7CB8BB;">MathList</span> [<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>2.0),<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>1.0),<span style="color: #7CB8BB;">Val</span> 1.0,<span style="color: #7CB8BB;">Val</span> 2.0,<span style="color: #7CB8BB;">Val</span> 3.0]))
</pre>
</div>
</div>
<div id="outline-container-org3fbe915" class="outline-3">
<h3 id="org3fbe915"><span class="section-number-3">6.1</span> toplevel: val = 96.0</h3>
</div>
<div id="outline-container-org2c98613" class="outline-3">
<h3 id="org2c98613"><span class="section-number-3">6.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-orge6ceafe" class="outline-3">
<h3 id="orge6ceafe"><span class="section-number-3">6.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-org7a3e761" class="outline-3">
<h3 id="org7a3e761"><span class="section-number-3">6.4</span> toplevel: xpl = 96.0</h3>
<div class="outline-text-3" id="text-6-4">
</div>
<div id="outline-container-orgdc3fc8b" class="outline-4">
<h4 id="orgdc3fc8b"><span class="section-number-4">6.4.1</span> 96.0 = product of 5 elements</h4>
<div class="outline-text-4" id="text-6-4-1">
<ul class="org-ul">
<li>-2.0</li>
<li>-1.0</li>
<li>2.0</li>
<li>4.0</li>
<li>6.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org73622c1"></a>fmap mathsection TimesVal 2.0 over 3 relevant elements (who pass Val 0.0 CLT)<br />
<ol class="org-ol">
<li><a id="org2cf925b"></a>base MathList with 5 elements<br />
<div class="outline-text-6" id="text-6-4-1-1-1">
<pre class="example" id="org28131d4">
Val (-2.0)
Val (-1.0)
Val 1.0
Val 2.0
Val 3.0
</pre>
</div>
</li>

<li><a id="orgc052fb2"></a>selection of relevant elements<br />
<ol class="org-ol">
<li><a id="org7729a23"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orgb8d51f6"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-1-1">
<pre class="example" id="org8aadf3f">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org36bbd48"></a>with<br /></li>


<li><a id="org4e6cbeb"></a>-2.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-1-3">
<pre class="example" id="org2727aa1">
toplevel / listfold product / fmap mathsection if / comparison &lt;: -2.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org3230ff1"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orge8f3109"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-2-1">
<pre class="example" id="org384cc3f">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orgd29931b"></a>with<br /></li>


<li><a id="org693622c"></a>-1.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-2-3">
<pre class="example" id="org564a149">
toplevel / listfold product / fmap mathsection if / comparison &lt;: -1.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org79a9a96"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org0eadfe8"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-3-1">
<pre class="example" id="orgd0c010e">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orgf7efb42"></a>with<br /></li>


<li><a id="org84c2ee7"></a>1.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-3-3">
<pre class="example" id="org3fd3357">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 1.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org17a0aba"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org5944db5"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-4-1">
<pre class="example" id="org7950fea">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org834eb96"></a>with<br /></li>


<li><a id="orgf3e5b2d"></a>2.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-4-3">
<pre class="example" id="org41dff8d">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 2.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="orgc8ec982"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org23a3b9d"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-5-1">
<pre class="example" id="org6507a71">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org57e7c32"></a>with<br /></li>


<li><a id="orga1ff8af"></a>3.0: a leaf value<br />
<div class="outline-text-8" id="text-6-4-1-1-2-5-3">
<pre class="example" id="orgc94082e">
toplevel / listfold product / fmap mathsection if / comparison &lt;: 3.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>




<li><a id="orgfdeb084"></a>-2.0: a leaf value<br />
<div class="outline-text-5" id="text-6-4-1-2">
<pre class="example" id="orgef80a78">
toplevel / listfold product: -2.0
</pre>
</div>
</li>

<li><a id="org1354962"></a>-1.0: a leaf value<br />
<div class="outline-text-5" id="text-6-4-1-3">
<pre class="example" id="org0ef47cc">
toplevel / listfold product: -1.0
</pre>
</div>
</li>

<li><a id="orgfa938e5"></a>2.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-6-4-1-4">
<pre class="example" id="org341e714">
toplevel / listfold product / multiplication: 2.0
2.0
toplevel / listfold product / multiplication: 1.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgcc65140"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-6-4-1-4-1">
<pre class="example" id="orgf06a4b2">
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>

<li><a id="org00e6a58"></a>by<br /></li>


<li><a id="orgf6c29c8"></a>1.0: a leaf value<br />
<div class="outline-text-6" id="text-6-4-1-4-3">
<pre class="example" id="org1d37396">
2.0
toplevel / listfold product / multiplication: 1.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org6780120"></a>4.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-6-4-1-5">
<pre class="example" id="orga3e8a1d">
toplevel / listfold product / multiplication: 2.0
2.0
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org44226fc"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-6-4-1-5-1">
<pre class="example" id="orgf66d04d">
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>

<li><a id="orgfdd18d6"></a>by<br /></li>


<li><a id="org41093e9"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-6-4-1-5-3">
<pre class="example" id="orged8609a">
2.0
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org2d0f434"></a>6.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-6-4-1-6">
<pre class="example" id="org0bb4ef0">
toplevel / listfold product / multiplication: 2.0
2.0
toplevel / listfold product / multiplication: 3.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org07aec73"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-6-4-1-6-1">
<pre class="example" id="orgdb344d1">
toplevel / listfold product / multiplication: 2.0
</pre>
</div>
</li>

<li><a id="org0c9dbf6"></a>by<br /></li>


<li><a id="org5c7d066"></a>3.0: a leaf value<br />
<div class="outline-text-6" id="text-6-4-1-6-3">
<pre class="example" id="org7c072c2">
2.0
toplevel / listfold product / multiplication: 3.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>



<div id="outline-container-orgcb9e1e4" class="outline-2">
<h2 id="orgcb9e1e4"><span class="section-number-2">7</span> calculate net income</h2>
</div>
<div id="outline-container-org8200b96" class="outline-2">
<h2 id="org8200b96"><span class="section-number-2">8</span> addCol net income</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orga7cbed7" class="outline-3">
<h3 id="orga7cbed7"><span class="section-number-3">8.1</span> adding 1 new column ("net income") with 8 rows</h3>
<div class="outline-text-3" id="text-8-1">
</div>
<div id="outline-container-org74ef52c" class="outline-4">
<h4 id="org74ef52c"><span class="section-number-4">8.1.1</span> Agriculture = 300000.0</h4>
<div class="outline-text-4" id="text-8-1-1">
</div>
<ol class="org-ol">
<li><a id="org5e3b12b"></a>row Agriculture<br />
<div class="outline-text-5" id="text-8-1-1-1">
<ul class="org-ul">
<li>starting with ordinary income (30000.0)</li>
<li>plus extraordinary income (270000.0) = 300000.0</li>
<li>less ordinary expenses (0.0) = 300000.0</li>
<li>less special expenses (0.0) = 300000.0</li>
</ul>
</div>
</li>
</ol>
</div>



<div id="outline-container-org3f6a1dd" class="outline-4">
<h4 id="org3f6a1dd"><span class="section-number-4">8.1.2</span> Capital = 0.0</h4>
<div class="outline-text-4" id="text-8-1-2">
</div>
<ol class="org-ol">
<li><a id="org3f95db3"></a>row Capital<br />
<div class="outline-text-5" id="text-8-1-2-1">
<ul class="org-ul">
<li>starting with ordinary income (0.0)</li>
<li>plus extraordinary income (0.0) = 0.0</li>
<li>less ordinary expenses (0.0) = 0.0</li>
<li>less special expenses (0.0) = 0.0</li>
</ul>
</div>
</li>
</ol>
</div>



<div id="outline-container-orge5c2210" class="outline-4">
<h4 id="orge5c2210"><span class="section-number-4">8.1.3</span> Employment = 0.0</h4>
<div class="outline-text-4" id="text-8-1-3">
</div>
<ol class="org-ol">
<li><a id="org380319a"></a>row Employment<br />
<div class="outline-text-5" id="text-8-1-3-1">
<ul class="org-ul">
<li>starting with ordinary income (0.0)</li>
<li>plus extraordinary income (0.0) = 0.0</li>
<li>less ordinary expenses (0.0) = 0.0</li>
<li>less special expenses (0.0) = 0.0</li>
</ul>
</div>
</li>
</ol>
</div>



<div id="outline-container-orgffd7c7a" class="outline-4">
<h4 id="orgffd7c7a"><span class="section-number-4">8.1.4</span> Exempt Capital = 200.0</h4>
<div class="outline-text-4" id="text-8-1-4">
</div>
<ol class="org-ol">
<li><a id="orgec1f300"></a>row Exempt Capital<br />
<div class="outline-text-5" id="text-8-1-4-1">
<ul class="org-ul">
<li>starting with ordinary income (100.0)</li>
<li>plus extraordinary income (100.0) = 200.0</li>
<li>less ordinary expenses (0.0) = 200.0</li>
<li>less special expenses (0.0) = 200.0</li>
</ul>
</div>
</li>
</ol>
</div>



<div id="outline-container-org6ba188b" class="outline-4">
<h4 id="org6ba188b"><span class="section-number-4">8.1.5</span> Independent = -6000.0</h4>
<div class="outline-text-4" id="text-8-1-5">
</div>
<ol class="org-ol">
<li><a id="org74d6716"></a>row Independent<br />
<div class="outline-text-5" id="text-8-1-5-1">
<ul class="org-ul">
<li>starting with ordinary income (0.0)</li>
<li>plus extraordinary income (0.0) = 0.0</li>
<li>less ordinary expenses (6000.0) = -6000.0</li>
<li>less special expenses (0.0) = -6000.0</li>
</ul>
</div>
</li>
</ol>
</div>



<div id="outline-container-org56e231b" class="outline-4">
<h4 id="org56e231b"><span class="section-number-4">8.1.6</span> Other = -100000.0</h4>
<div class="outline-text-4" id="text-8-1-6">
</div>
<ol class="org-ol">
<li><a id="org19891b5"></a>row Other<br />
<div class="outline-text-5" id="text-8-1-6-1">
<ul class="org-ul">
<li>starting with ordinary income (0.0)</li>
<li>plus extraordinary income (0.0) = 0.0</li>
<li>less ordinary expenses (100000.0) = -100000.0</li>
<li>less special expenses (0.0) = -100000.0</li>
</ul>
</div>
</li>
</ol>
</div>



<div id="outline-container-orgf1076d5" class="outline-4">
<h4 id="orgf1076d5"><span class="section-number-4">8.1.7</span> Rents = 70000.0</h4>
<div class="outline-text-4" id="text-8-1-7">
</div>
<ol class="org-ol">
<li><a id="orgcd2a830"></a>row Rents<br />
<div class="outline-text-5" id="text-8-1-7-1">
<ul class="org-ul">
<li>starting with ordinary income (72150.0)</li>
<li>plus extraordinary income (0.0) = 72150.0</li>
<li>less ordinary expenses (2150.0) = 70000.0</li>
<li>less special expenses (0.0) = 70000.0</li>
</ul>
</div>
</li>
</ol>
</div>



<div id="outline-container-org12519cb" class="outline-4">
<h4 id="org12519cb"><span class="section-number-4">8.1.8</span> Trade = 0.0</h4>
<div class="outline-text-4" id="text-8-1-8">
</div>
<ol class="org-ol">
<li><a id="org26464bf"></a>row Trade<br />
<div class="outline-text-5" id="text-8-1-8-1">
<ul class="org-ul">
<li>starting with ordinary income (0.0)</li>
<li>plus extraordinary income (0.0) = 0.0</li>
<li>less ordinary expenses (0.0) = 0.0</li>
<li>less special expenses (0.0) = 0.0</li>
</ul>





<pre class="example" id="org55e6d94">
                extraordinary income  net income  ordinary expenses  ordinary income  special expenses
Agriculture     270000                300000      0                  30000            0               
Capital         0                     0           0                  0                0               
Employment      0                     0           0                  0                0               
Exempt Capital  100                   200         0                  100              0               
Independent     0                     -6000       6000               0                0               
Other           0                     -100000     100000             0                0               
Rents           0                     70000       2150               72150            0               
Trade           0                     0           0                  0                0               

</pre>
</div>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org704d61b" class="outline-2">
<h2 id="org704d61b"><span class="section-number-2">9</span> what is the positive sum of the incomes?</h2>
</div>
<div id="outline-container-org3f9c2d4" class="outline-2">
<h2 id="org3f9c2d4"><span class="section-number-2">10</span> xplainF</h2>
<div class="outline-text-2" id="text-10">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">ListFold</span> <span style="color: #7CB8BB;">FoldSum</span> (<span style="color: #7CB8BB;">ListFilt</span> (<span style="color: #7CB8BB;">Val</span> 0.0) <span style="color: #7CB8BB;">CLT</span> (<span style="color: #7CB8BB;">MathList</span> [<span style="color: #7CB8BB;">Val</span> 300000.0,<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 200.0,<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>6000.0),<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>100000.0),<span style="color: #7CB8BB;">Val</span> 70000.0,<span style="color: #7CB8BB;">Val</span> 0.0]))
</pre>
</div>
</div>
<div id="outline-container-org9c8245e" class="outline-3">
<h3 id="org9c8245e"><span class="section-number-3">10.1</span> toplevel: val = 370200.0</h3>
</div>
<div id="outline-container-org8b1ac11" class="outline-3">
<h3 id="org8b1ac11"><span class="section-number-3">10.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-org947ce44" class="outline-3">
<h3 id="org947ce44"><span class="section-number-3">10.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-org938da40" class="outline-3">
<h3 id="org938da40"><span class="section-number-3">10.4</span> toplevel: xpl = 370200.0</h3>
<div class="outline-text-3" id="text-10-4">
</div>
<div id="outline-container-org4829748" class="outline-4">
<h4 id="org4829748"><span class="section-number-4">10.4.1</span> 370200.0 = sum of 3 elements</h4>
<div class="outline-text-4" id="text-10-4-1">
<ul class="org-ul">
<li>300000.0</li>
<li>200.0</li>
<li>70000.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org4520c49"></a>3 elements were reduced from an original 8<br />
<div class="outline-text-5" id="text-10-4-1-1">
<ul class="org-ul">
<li>300000.0</li>
<li>0.0</li>
<li>0.0</li>
<li>200.0</li>
<li>-6000.0</li>
<li>-100000.0</li>
<li>70000.0</li>
<li>0.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="orgf60cc86"></a>included Val 300000.0 due to passing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-1">
<pre class="example" id="orgebcc902">
Val 300000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgdb18b8a"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orga144c55"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-1-1-1">
<pre class="example" id="orgae72761">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org47b0ce0"></a>with<br /></li>


<li><a id="org872ef07"></a>300000.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-1-1-3">
<pre class="example" id="org479f312">
toplevel / listfold sum / comparison &lt;: 300000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orgc9949fd"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-2">
<pre class="example" id="org2a05b57">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org6bfbc7e"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orgeb0ab85"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-2-1-1">
<pre class="example" id="orge5173bf">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org1176e94"></a>with<br /></li>


<li><a id="org2377ea3"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-2-1-3">
<pre class="example" id="orgcb31555">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org0f153d1"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-3">
<pre class="example" id="org7fa753f">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgf0aebcb"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org6caa0db"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-3-1-1">
<pre class="example" id="org0c803ef">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org1311ed1"></a>with<br /></li>


<li><a id="orgf792cd7"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-3-1-3">
<pre class="example" id="orgc29ee7b">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orgb31f43d"></a>included Val 200.0 due to passing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-4">
<pre class="example" id="org67686f1">
Val 200.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgb122b10"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orgc35d009"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-4-1-1">
<pre class="example" id="org4f2747a">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orgc3998ac"></a>with<br /></li>


<li><a id="org34af6d0"></a>200.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-4-1-3">
<pre class="example" id="orgf707eed">
toplevel / listfold sum / comparison &lt;: 200.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org2321703"></a>excluded Val (-6000.0) due to failing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-5">
<pre class="example" id="org235dd0a">
Val (-6000.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="org17cbb87"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orgbb84cc3"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-5-1-1">
<pre class="example" id="org05b3138">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orge2974ff"></a>with<br /></li>


<li><a id="orga4e0154"></a>-6000.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-5-1-3">
<pre class="example" id="org982e368">
toplevel / listfold sum / comparison &lt;: -6000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orga884a19"></a>excluded Val (-100000.0) due to failing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-6">
<pre class="example" id="org409baa3">
Val (-100000.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="org7643d12"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orga650649"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-6-1-1">
<pre class="example" id="org03e5e27">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org9a13a85"></a>with<br /></li>


<li><a id="org2f635da"></a>-100000.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-6-1-3">
<pre class="example" id="orga122b76">
toplevel / listfold sum / comparison &lt;: -100000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org2b37aa5"></a>included Val 70000.0 due to passing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-7">
<pre class="example" id="org94d890f">
Val 70000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgadae639"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orgb773a78"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-7-1-1">
<pre class="example" id="org89022d5">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org63f9f42"></a>with<br /></li>


<li><a id="orgdbd14a5"></a>70000.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-7-1-3">
<pre class="example" id="org6b673f2">
toplevel / listfold sum / comparison &lt;: 70000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orgdd41374"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-10-4-1-1-8">
<pre class="example" id="org7cf0f94">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org1d5ec1e"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org27cde5c"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-8-1-1">
<pre class="example" id="orgbf33dd0">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org21373c6"></a>with<br /></li>


<li><a id="org915c9e1"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-10-4-1-1-8-1-3">
<pre class="example" id="orgb334008">
toplevel / listfold sum / comparison &lt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>




<li><a id="orgcdd80d8"></a>300000.0: a leaf value<br />
<div class="outline-text-5" id="text-10-4-1-2">
<pre class="example" id="org6ac19f9">
toplevel / listfold sum: 300000.0
</pre>
</div>
</li>

<li><a id="org4654318"></a>200.0: a leaf value<br />
<div class="outline-text-5" id="text-10-4-1-3">
<pre class="example" id="orgd0e6b17">
toplevel / listfold sum: 200.0
</pre>
</div>
</li>

<li><a id="orge3ef2dd"></a>70000.0: a leaf value<br />
<div class="outline-text-5" id="text-10-4-1-4">
<pre class="example" id="orgecd6f3b">
toplevel / listfold sum: 70000.0
</pre>
</div>
</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-orga385423" class="outline-2">
<h2 id="orga385423"><span class="section-number-2">11</span> what is the negative sum of the incomes?</h2>
</div>
<div id="outline-container-org180afe5" class="outline-2">
<h2 id="org180afe5"><span class="section-number-2">12</span> xplainF</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">ListFold</span> <span style="color: #7CB8BB;">FoldSum</span> (<span style="color: #7CB8BB;">ListFilt</span> (<span style="color: #7CB8BB;">Val</span> 0.0) <span style="color: #7CB8BB;">CGT</span> (<span style="color: #7CB8BB;">MathList</span> [<span style="color: #7CB8BB;">Val</span> 300000.0,<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 200.0,<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>6000.0),<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>100000.0),<span style="color: #7CB8BB;">Val</span> 70000.0,<span style="color: #7CB8BB;">Val</span> 0.0]))
</pre>
</div>
</div>
<div id="outline-container-org120236f" class="outline-3">
<h3 id="org120236f"><span class="section-number-3">12.1</span> toplevel: val = -106000.0</h3>
</div>
<div id="outline-container-org7dcbce6" class="outline-3">
<h3 id="org7dcbce6"><span class="section-number-3">12.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-orgb87d924" class="outline-3">
<h3 id="orgb87d924"><span class="section-number-3">12.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-org0e24b9d" class="outline-3">
<h3 id="org0e24b9d"><span class="section-number-3">12.4</span> toplevel: xpl = -106000.0</h3>
<div class="outline-text-3" id="text-12-4">
</div>
<div id="outline-container-org2e6cdc7" class="outline-4">
<h4 id="org2e6cdc7"><span class="section-number-4">12.4.1</span> -106000.0 = sum of 2 elements</h4>
<div class="outline-text-4" id="text-12-4-1">
<ul class="org-ul">
<li>-6000.0</li>
<li>-100000.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org5bb7639"></a>2 elements were reduced from an original 8<br />
<div class="outline-text-5" id="text-12-4-1-1">
<ul class="org-ul">
<li>300000.0</li>
<li>0.0</li>
<li>0.0</li>
<li>200.0</li>
<li>-6000.0</li>
<li>-100000.0</li>
<li>70000.0</li>
<li>0.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="orgadbd831"></a>excluded Val 300000.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-1">
<pre class="example" id="org67e2985">
Val 300000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org212879c"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org4bfebea"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-1-1-1">
<pre class="example" id="orgda64d49">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org5b934cf"></a>with<br /></li>


<li><a id="org00ab62b"></a>300000.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-1-1-3">
<pre class="example" id="org8fe84aa">
toplevel / listfold sum / comparison &gt;: 300000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org3cbf186"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-2">
<pre class="example" id="orgf722a08">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org44b1f22"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orge2cf370"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-2-1-1">
<pre class="example" id="org42c1e4a">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orgf1878d6"></a>with<br /></li>


<li><a id="orgb16f6b6"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-2-1-3">
<pre class="example" id="orgdb37c21">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org9b92cde"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-3">
<pre class="example" id="org042ef7a">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgb98ede2"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orge28a6ec"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-3-1-1">
<pre class="example" id="orgd8d5ea1">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org5e0e24d"></a>with<br /></li>


<li><a id="org150f261"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-3-1-3">
<pre class="example" id="orgbc0793d">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orgab8826b"></a>excluded Val 200.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-4">
<pre class="example" id="orgb0455ba">
Val 200.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org0962f94"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org028069e"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-4-1-1">
<pre class="example" id="orgc445210">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org93cc254"></a>with<br /></li>


<li><a id="org241d12c"></a>200.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-4-1-3">
<pre class="example" id="orgcd447a0">
toplevel / listfold sum / comparison &gt;: 200.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org1daabf9"></a>included Val (-6000.0) due to passing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-5">
<pre class="example" id="orgdabb7f7">
Val (-6000.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="orgab16181"></a>True is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org56a21e6"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-5-1-1">
<pre class="example" id="org4d0fa89">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org2e42eb3"></a>with<br /></li>


<li><a id="org0f43278"></a>-6000.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-5-1-3">
<pre class="example" id="org1990525">
toplevel / listfold sum / comparison &gt;: -6000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org93cb4dd"></a>included Val (-100000.0) due to passing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-6">
<pre class="example" id="orgdb6f5b9">
Val (-100000.0)
</pre>
</div>
<ol class="org-ol">
<li><a id="org6f4bd3f"></a>True is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org4c9eaf1"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-6-1-1">
<pre class="example" id="org3bd964c">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orgb331f8c"></a>with<br /></li>


<li><a id="org2edfa55"></a>-100000.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-6-1-3">
<pre class="example" id="org84e91ce">
toplevel / listfold sum / comparison &gt;: -100000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org3770ffa"></a>excluded Val 70000.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-7">
<pre class="example" id="org350e3e3">
Val 70000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org66de59b"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org2fd1821"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-7-1-1">
<pre class="example" id="orgd8e593a">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orgb45ae88"></a>with<br /></li>


<li><a id="org557d6dc"></a>70000.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-7-1-3">
<pre class="example" id="org9b7803d">
toplevel / listfold sum / comparison &gt;: 70000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org0cbd8e1"></a>excluded Val 0.0 due to failing comparison test<br />
<div class="outline-text-6" id="text-12-4-1-1-8">
<pre class="example" id="org82b6c89">
Val 0.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org646131b"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgabfe42e"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-8-1-1">
<pre class="example" id="orgbf3d8fc">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orgb0ce50d"></a>with<br /></li>


<li><a id="org971ea3a"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-12-4-1-1-8-1-3">
<pre class="example" id="orgf343443">
toplevel / listfold sum / comparison &gt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>




<li><a id="orgc2ee33c"></a>-6000.0: a leaf value<br />
<div class="outline-text-5" id="text-12-4-1-2">
<pre class="example" id="org17ed193">
toplevel / listfold sum: -6000.0
</pre>
</div>
</li>

<li><a id="org3ebb97d"></a>-100000.0: a leaf value<br />
<div class="outline-text-5" id="text-12-4-1-3">
<pre class="example" id="org9e405db">
toplevel / listfold sum: -100000.0
</pre>
</div>
</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-org7b0eb5b" class="outline-2">
<h2 id="org7b0eb5b"><span class="section-number-2">13</span> if the positive sum is greater than 100000, the maximum reduction is half of the negative sum; otherwise it is the entire negative sum</h2>
</div>
<div id="outline-container-orgfaf29b6" class="outline-2">
<h2 id="orgfaf29b6"><span class="section-number-2">14</span> xplainF</h2>
<div class="outline-text-2" id="text-14">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">MathITE</span> (<span style="color: #7CB8BB;">PredComp</span> <span style="color: #7CB8BB;">CGT</span> (<span style="color: #7CB8BB;">Val</span> 370200.0) (<span style="color: #7CB8BB;">Val</span> 100000.0)) (<span style="color: #7CB8BB;">MathBin</span> <span style="color: #7CB8BB;">Divide</span> (<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>106000.0)) (<span style="color: #7CB8BB;">Val</span> 2.0)) (<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>106000.0))
</pre>
</div>
</div>
<div id="outline-container-orgc6a3818" class="outline-3">
<h3 id="orgc6a3818"><span class="section-number-3">14.1</span> toplevel: val = -53000.0</h3>
</div>
<div id="outline-container-org63321cb" class="outline-3">
<h3 id="org63321cb"><span class="section-number-3">14.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-orga9402cf" class="outline-3">
<h3 id="orga9402cf"><span class="section-number-3">14.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-orgb20e0f5" class="outline-3">
<h3 id="orgb20e0f5"><span class="section-number-3">14.4</span> toplevel: xpl = -53000.0</h3>
<div class="outline-text-3" id="text-14-4">
</div>
<div id="outline-container-org8cffab1" class="outline-4">
<h4 id="org8cffab1"><span class="section-number-4">14.4.1</span> if PredComp CGT (Val 370200.0) (Val 100000.0) then MathBin Divide (Val (-106000.0)) (Val 2.0) else Val (-106000.0)</h4>
<div class="outline-text-4" id="text-14-4-1">
</div>
<ol class="org-ol">
<li><a id="orgbb1e3fe"></a>True is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgbe88410"></a>370200.0: a leaf value<br />
<div class="outline-text-6" id="text-14-4-1-1-1">
<pre class="example" id="org0a8a4c7">
toplevel / if-then-else / comparison &gt;: 370200.0
</pre>
</div>
</li>

<li><a id="org2384a18"></a>with<br /></li>


<li><a id="orgb690fe8"></a>100000.0: a leaf value<br />
<div class="outline-text-6" id="text-14-4-1-1-3">
<pre class="example" id="org73c2bbb">
toplevel / if-then-else / comparison &gt;: 100000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org907d15e"></a>thus we choose the then branch<br /></li>


<li><a id="org707400f"></a>-53000.0: which we obtain by dividing<br />
<div class="outline-text-5" id="text-14-4-1-3">
<pre class="example" id="orgbc550dd">
toplevel / if-then-else / division: -106000.0
-106000.0
toplevel / if-then-else / division: 2.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org0bc07e4"></a>-106000.0: a leaf value<br />
<div class="outline-text-6" id="text-14-4-1-3-1">
<pre class="example" id="org5575144">
toplevel / if-then-else / division: -106000.0
</pre>
</div>
</li>

<li><a id="orgeb97279"></a>by<br /></li>


<li><a id="org7be94ee"></a>2.0: a leaf value<br />
<div class="outline-text-6" id="text-14-4-1-3-3">
<pre class="example" id="orgce31aaa">
-106000.0
toplevel / if-then-else / division: 2.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>



<div id="outline-container-orga274f27" class="outline-2">
<h2 id="orga274f27"><span class="section-number-2">15</span> the maximum amount by which we can reduce the positive sum is -53000.0</h2>
</div>
<div id="outline-container-org5650791" class="outline-2">
<h2 id="org5650791"><span class="section-number-2">16</span> xplainF</h2>
<div class="outline-text-2" id="text-16">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">MathMax</span> (<span style="color: #7CB8BB;">Val</span> 0.0) (<span style="color: #7CB8BB;">MathBin</span> <span style="color: #7CB8BB;">Plus</span> (<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>106000.0)) (<span style="color: #7CB8BB;">MathMin</span> (<span style="color: #7CB8BB;">Val</span> 0.0) (<span style="color: #7CB8BB;">Val</span> 370200.0)))
</pre>
</div>
</div>
<div id="outline-container-org6fc01b7" class="outline-3">
<h3 id="org6fc01b7"><span class="section-number-3">16.1</span> toplevel: val = 0.0</h3>
</div>
<div id="outline-container-orgffbbe8b" class="outline-3">
<h3 id="orgffbbe8b"><span class="section-number-3">16.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-orgdbdc288" class="outline-3">
<h3 id="orgdbdc288"><span class="section-number-3">16.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-orgfff1672" class="outline-3">
<h3 id="orgfff1672"><span class="section-number-3">16.4</span> toplevel: xpl = 0.0</h3>
<div class="outline-text-3" id="text-16-4">
</div>
<div id="outline-container-orgb61f054" class="outline-4">
<h4 id="orgb61f054"><span class="section-number-4">16.4.1</span> 0.0 = max of 2 elements</h4>
<div class="outline-text-4" id="text-16-4-1">
<ul class="org-ul">
<li>0.0</li>
<li>-106000.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="orgdb150a6"></a>base MathList with 2 elements<br />
<div class="outline-text-5" id="text-16-4-1-1">
<pre class="example" id="orgcac4eaa">
Val 0.0
MathBin Plus (Val (-106000.0)) (MathMin (Val 0.0) (Val 370200.0))
</pre>
</div>
</li>

<li><a id="orga8df9b8"></a>0.0: a leaf value<br />
<div class="outline-text-5" id="text-16-4-1-2">
<pre class="example" id="org05d9949">
toplevel / listfold max: 0.0
</pre>
</div>
</li>

<li><a id="org591bf00"></a>-106000.0: which we obtain by adding<br />
<div class="outline-text-5" id="text-16-4-1-3">
<pre class="example" id="org20c4d82">
toplevel / listfold max / addition: -106000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgfcbec70"></a>-106000.0: a leaf value<br />
<div class="outline-text-6" id="text-16-4-1-3-1">
<pre class="example" id="org065043f">
toplevel / listfold max / addition: -106000.0
</pre>
</div>
</li>

<li><a id="org521c0fd"></a>to<br /></li>


<li><a id="org2d85046"></a>0.0 = min of 2 elements<br />
<div class="outline-text-6" id="text-16-4-1-3-3">
<ul class="org-ul">
<li>0.0</li>
<li>370200.0</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org8dc3dde"></a>base MathList with 2 elements<br />
<div class="outline-text-7" id="text-16-4-1-3-3-1">
<pre class="example" id="org741030e">
Val 0.0
Val 370200.0
</pre>
</div>
</li>

<li><a id="org36bc8c1"></a>0.0: a leaf value<br />
<div class="outline-text-7" id="text-16-4-1-3-3-2">
<pre class="example" id="orge2d0f5f">
-106000.0
toplevel / listfold max / addition / listfold min: 0.0
</pre>
</div>
</li>

<li><a id="orgf05a392"></a>370200.0: a leaf value<br />
<div class="outline-text-7" id="text-16-4-1-3-3-3">
<pre class="example" id="org5bbd192">
-106000.0
toplevel / listfold max / addition / listfold min: 370200.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>




<div id="outline-container-org6094042" class="outline-2">
<h2 id="org6094042"><span class="section-number-2">17</span> the amount by which we can shrink the negative sum is 0.0</h2>
</div>
<div id="outline-container-org39d9a68" class="outline-2">
<h2 id="org39d9a68"><span class="section-number-2">18</span> now we prorata reduce both the positive and the negative incomes, by type</h2>
</div>
<div id="outline-container-org7a63d4a" class="outline-2">
<h2 id="org7a63d4a"><span class="section-number-2">19</span> xplainF</h2>
<div class="outline-text-2" id="text-19">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #7CB8BB;">ListMapIf</span> (<span style="color: #7CB8BB;">MathSection</span> <span style="color: #7CB8BB;">Times</span> (<span style="color: #7CB8BB;">Val</span> 1.0)) (<span style="color: #7CB8BB;">Val</span> 0.0) <span style="color: #7CB8BB;">CGT</span> (<span style="color: #7CB8BB;">ListMapIf</span> (<span style="color: #7CB8BB;">MathSection</span> <span style="color: #7CB8BB;">Times</span> (<span style="color: #7CB8BB;">Val</span> 1.1431658)) (<span style="color: #7CB8BB;">Val</span> 0.0) <span style="color: #7CB8BB;">CLT</span> (<span style="color: #7CB8BB;">MathList</span> [<span style="color: #7CB8BB;">Val</span> 300000.0,<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 0.0,<span style="color: #7CB8BB;">Val</span> 200.0,<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>6000.0),<span style="color: #7CB8BB;">Val</span> (<span style="color: #DFAF8F;">-</span>100000.0),<span style="color: #7CB8BB;">Val</span> 70000.0,<span style="color: #7CB8BB;">Val</span> 0.0]))
</pre>
</div>
</div>
<div id="outline-container-orgc0ab008" class="outline-3">
<h3 id="orgc0ab008"><span class="section-number-3">19.1</span> toplevel: val = [342949.75,0.0,0.0,228.63316,-6000.0,-100000.0,80021.61,0.0]</h3>
</div>
<div id="outline-container-org214b70b" class="outline-3">
<h3 id="org214b70b"><span class="section-number-3">19.2</span> toplevel: symtab = MyState {symtabF = fromList [], symtabP = fromList []}</h3>
</div>
<div id="outline-container-orgd6d0292" class="outline-3">
<h3 id="orgd6d0292"><span class="section-number-3">19.3</span> toplevel: log = []</h3>
</div>
<div id="outline-container-org7b3a921" class="outline-3">
<h3 id="org7b3a921"><span class="section-number-3">19.4</span> toplevel: xpl = [342949.75,0.0,0.0,228.63316,-6000.0,-100000.0,80021.61,0.0]</h3>
<div class="outline-text-3" id="text-19-4">
</div>
<div id="outline-container-org1a5f948" class="outline-4">
<h4 id="org1a5f948"><span class="section-number-4">19.4.1</span> deep evaluation to floats</h4>
<div class="outline-text-4" id="text-19-4-1">
</div>
<ol class="org-ol">
<li><a id="org92b9099"></a>fmap mathsection TimesVal 1.0 over 2 relevant elements (who pass Val 0.0 CGT)<br />
<ol class="org-ol">
<li><a id="orgce53f5d"></a>fmap mathsection TimesVal 1.1431658 over 3 relevant elements (who pass Val 0.0 CLT)<br />
<ol class="org-ol">
<li><a id="org59bd367"></a>base MathList with 8 elements<br />
<div class="outline-text-7" id="text-19-4-1-1-1-1">
<pre class="example" id="org2b18875">
Val 300000.0
Val 0.0
Val 0.0
Val 200.0
Val (-6000.0)
Val (-100000.0)
Val 70000.0
Val 0.0
</pre>
</div>
</li>

<li><a id="org39cc7c8"></a>selection of relevant elements<br />
<ol class="org-ol">
<li><a id="org1e4d4fb"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org066d91d"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-1-1">
<pre class="example" id="org87a5797">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orga786330"></a>with<br /></li>


<li><a id="orgf1f5cba"></a>300000.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-1-3">
<pre class="example" id="org3f70d18">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 300000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org10f53ad"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org9a92417"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-2-1">
<pre class="example" id="org30b7cd7">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org717a1bd"></a>with<br /></li>


<li><a id="org5279882"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-2-3">
<pre class="example" id="org2cb1372">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org2adab16"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org85d3385"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-3-1">
<pre class="example" id="orgf3e52c5">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org68cd28a"></a>with<br /></li>


<li><a id="org0a9ea06"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-3-3">
<pre class="example" id="org6f7ceb1">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="orgcb0653b"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org6802828"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-4-1">
<pre class="example" id="org8bbf61a">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org9076663"></a>with<br /></li>


<li><a id="orgb04bda6"></a>200.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-4-3">
<pre class="example" id="org184b30f">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 200.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="orgb8da0da"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="org6b36b00"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-5-1">
<pre class="example" id="org7bde721">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orgc008de2"></a>with<br /></li>


<li><a id="org9ffda5b"></a>-6000.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-5-3">
<pre class="example" id="orgc8a012d">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: -6000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="orgd8dd793"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orga5ebb51"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-6-1">
<pre class="example" id="org6665131">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="orgdb8cc16"></a>with<br /></li>


<li><a id="org0456a33"></a>-100000.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-6-3">
<pre class="example" id="org3735c3e">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: -100000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="orgd4cef5e"></a>True is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orgcd6c962"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-7-1">
<pre class="example" id="org737c85c">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org1064793"></a>with<br /></li>


<li><a id="orge3ee661"></a>70000.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-7-3">
<pre class="example" id="org629e34d">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 70000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org781d5b0"></a>False is the result of comparing (&lt;)<br />
<ol class="org-ol">
<li><a id="orgb2bc621"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-8-1">
<pre class="example" id="org4b185a9">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>

<li><a id="org5e4b734"></a>with<br /></li>


<li><a id="orgc075d0a"></a>0.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-1-2-8-3">
<pre class="example" id="org8ac4396">
toplevel / fmap mathsection if / fmap mathsection if / comparison &lt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>




<li><a id="orgf2a6c28"></a>selection of relevant elements<br />
<ol class="org-ol">
<li><a id="org634bffa"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orge1fd3c4"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-1-1">
<pre class="example" id="org66bc39c">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org84f5ac5"></a>with<br /></li>


<li><a id="orgc87d274"></a>342949.75: which we obtain by multiplying<br />
<div class="outline-text-8" id="text-19-4-1-1-2-1-3">
<pre class="example" id="org30ad883">
toplevel / fmap mathsection if / comparison &gt; / multiplication: 1.1431658
1.1431658
toplevel / fmap mathsection if / comparison &gt; / multiplication: 300000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgb9e62cb"></a>1.1431658: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-2-1-3-1">
<pre class="example" id="orgb076085">
toplevel / fmap mathsection if / comparison &gt; / multiplication: 1.1431658
</pre>
</div>
</li>

<li><a id="orgd5a131b"></a>by<br /></li>


<li><a id="orgeef6fdb"></a>300000.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-2-1-3-3">
<pre class="example" id="orgf2df66e">
1.1431658
toplevel / fmap mathsection if / comparison &gt; / multiplication: 300000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orga3c7681"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org6e9c645"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-2-1">
<pre class="example" id="org0828f7e">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orge608c98"></a>with<br /></li>


<li><a id="org8edbb83"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-2-3">
<pre class="example" id="org792369e">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org9a44553"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgae4fd58"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-3-1">
<pre class="example" id="orgefdf971">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org894249b"></a>with<br /></li>


<li><a id="orgfaa9ec1"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-3-3">
<pre class="example" id="org241d88b">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org251aba5"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgd6d682f"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-4-1">
<pre class="example" id="org8be200c">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org1c61dbc"></a>with<br /></li>


<li><a id="orgfbb75a9"></a>228.63316: which we obtain by multiplying<br />
<div class="outline-text-8" id="text-19-4-1-1-2-4-3">
<pre class="example" id="orgb324f59">
toplevel / fmap mathsection if / comparison &gt; / multiplication: 1.1431658
1.1431658
toplevel / fmap mathsection if / comparison &gt; / multiplication: 200.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org6f8d14e"></a>1.1431658: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-2-4-3-1">
<pre class="example" id="org4b77a0f">
toplevel / fmap mathsection if / comparison &gt; / multiplication: 1.1431658
</pre>
</div>
</li>

<li><a id="orge3e356c"></a>by<br /></li>


<li><a id="orgf81784d"></a>200.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-2-4-3-3">
<pre class="example" id="orge735be5">
1.1431658
toplevel / fmap mathsection if / comparison &gt; / multiplication: 200.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="org8c9ac3f"></a>True is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org94f04fc"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-5-1">
<pre class="example" id="org62192a6">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orgf510138"></a>with<br /></li>


<li><a id="org52b4d9c"></a>-6000.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-5-3">
<pre class="example" id="orgbfd3063">
toplevel / fmap mathsection if / comparison &gt;: -6000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org14ab038"></a>True is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org44ce1f8"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-6-1">
<pre class="example" id="orgc9b42fe">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org8df5c39"></a>with<br /></li>


<li><a id="org97eb2b2"></a>-100000.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-6-3">
<pre class="example" id="orgce61559">
toplevel / fmap mathsection if / comparison &gt;: -100000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="orge8405b2"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="org934fbce"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-7-1">
<pre class="example" id="orgb7a69a1">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="orga89d803"></a>with<br /></li>


<li><a id="org41a978f"></a>80021.61: which we obtain by multiplying<br />
<div class="outline-text-8" id="text-19-4-1-1-2-7-3">
<pre class="example" id="org6fca19d">
toplevel / fmap mathsection if / comparison &gt; / multiplication: 1.1431658
1.1431658
toplevel / fmap mathsection if / comparison &gt; / multiplication: 70000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgc8b2475"></a>1.1431658: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-2-7-3-1">
<pre class="example" id="orgd4796be">
toplevel / fmap mathsection if / comparison &gt; / multiplication: 1.1431658
</pre>
</div>
</li>

<li><a id="org5c96342"></a>by<br /></li>


<li><a id="org7c2e502"></a>70000.0: a leaf value<br />
<div class="outline-text-9" id="text-19-4-1-1-2-7-3-3">
<pre class="example" id="orga44d16c">
1.1431658
toplevel / fmap mathsection if / comparison &gt; / multiplication: 70000.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>



<li><a id="orge266dd6"></a>False is the result of comparing (&gt;)<br />
<ol class="org-ol">
<li><a id="orgb3fdd2e"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-8-1">
<pre class="example" id="org3063ba7">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>

<li><a id="org93244de"></a>with<br /></li>


<li><a id="org740bcbd"></a>0.0: a leaf value<br />
<div class="outline-text-8" id="text-19-4-1-1-2-8-3">
<pre class="example" id="org898b695">
toplevel / fmap mathsection if / comparison &gt;: 0.0
</pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>




<li><a id="orgc5ceddc"></a>342949.75: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-19-4-1-2">
<pre class="example" id="org97e25d7">
toplevel / multiplication: 1.1431658
1.1431658
toplevel / multiplication: 300000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgfadbe6b"></a>1.1431658: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-2-1">
<pre class="example" id="org77fad8f">
toplevel / multiplication: 1.1431658
</pre>
</div>
</li>

<li><a id="orgbe56c79"></a>by<br /></li>


<li><a id="orgdedbbc2"></a>300000.0: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-2-3">
<pre class="example" id="org564a58b">
1.1431658
toplevel / multiplication: 300000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org3fa93c7"></a>0.0: a leaf value<br />
<div class="outline-text-5" id="text-19-4-1-3">
<pre class="example" id="org71b23ca">
toplevel: 0.0
</pre>
</div>
</li>

<li><a id="orgedb485a"></a>0.0: a leaf value<br />
<div class="outline-text-5" id="text-19-4-1-4">
<pre class="example" id="org61a4aca">
toplevel: 0.0
</pre>
</div>
</li>

<li><a id="orgcfb3459"></a>228.63316: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-19-4-1-5">
<pre class="example" id="org4dc4a23">
toplevel / multiplication: 1.1431658
1.1431658
toplevel / multiplication: 200.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgea58ac7"></a>1.1431658: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-5-1">
<pre class="example" id="orga0c137f">
toplevel / multiplication: 1.1431658
</pre>
</div>
</li>

<li><a id="org6bafb85"></a>by<br /></li>


<li><a id="org7915287"></a>200.0: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-5-3">
<pre class="example" id="orgbf5dc73">
1.1431658
toplevel / multiplication: 200.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org5841078"></a>-6000.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-19-4-1-6">
<pre class="example" id="org500e0c2">
toplevel / multiplication: 1.0
1.0
toplevel / multiplication: -6000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org8a320d8"></a>1.0: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-6-1">
<pre class="example" id="org368533c">
toplevel / multiplication: 1.0
</pre>
</div>
</li>

<li><a id="org3e29453"></a>by<br /></li>


<li><a id="org51000d2"></a>-6000.0: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-6-3">
<pre class="example" id="org60b62dd">
1.0
toplevel / multiplication: -6000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org42d92d9"></a>-100000.0: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-19-4-1-7">
<pre class="example" id="orgca242ab">
toplevel / multiplication: 1.0
1.0
toplevel / multiplication: -100000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="org9720c42"></a>1.0: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-7-1">
<pre class="example" id="org9dc49de">
toplevel / multiplication: 1.0
</pre>
</div>
</li>

<li><a id="org83d6ab8"></a>by<br /></li>


<li><a id="orgde1d8d9"></a>-100000.0: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-7-3">
<pre class="example" id="org3aa4907">
1.0
toplevel / multiplication: -100000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="org42c603f"></a>80021.61: which we obtain by multiplying<br />
<div class="outline-text-5" id="text-19-4-1-8">
<pre class="example" id="org0bfbd60">
toplevel / multiplication: 1.1431658
1.1431658
toplevel / multiplication: 70000.0
</pre>
</div>
<ol class="org-ol">
<li><a id="orgcab7681"></a>1.1431658: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-8-1">
<pre class="example" id="org2e97238">
toplevel / multiplication: 1.1431658
</pre>
</div>
</li>

<li><a id="orgada69ed"></a>by<br /></li>


<li><a id="org8618d25"></a>70000.0: a leaf value<br />
<div class="outline-text-6" id="text-19-4-1-8-3">
<pre class="example" id="orgbef1721">
1.1431658
toplevel / multiplication: 70000.0
</pre>
</div>
</li>
</ol>
</li>


<li><a id="orgc3a4348"></a>0.0: a leaf value<br />
<div class="outline-text-5" id="text-19-4-1-9">
<pre class="example" id="org401ba50">
toplevel: 0.0
</pre>
</div>
</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-orgde527b1" class="outline-2">
<h2 id="orgde527b1"><span class="section-number-2">20</span> we have a new column "reduction"</h2>
<div class="outline-text-2" id="text-20">
<pre class="example" id="org69a5d0d">
                extraordinary income  net income  ordinary expenses  ordinary income  reduction  special expenses
Agriculture     270000                300000      0                  30000            342950     0               
Capital         0                     0           0                  0                0          0               
Employment      0                     0           0                  0                0          0               
Exempt Capital  100                   200         0                  100              229        0               
Independent     0                     -6000       6000               0                -6000      0               
Other           0                     -100000     100000             0                -100000    0               
Rents           0                     70000       2150               72150            80022      0               
Trade           0                     0           0                  0                0          0               

</pre>
</div>
</div>

<div id="outline-container-org30ae5ba" class="outline-2">
<h2 id="org30ae5ba"><span class="section-number-2">21</span> Scenarios</h2>
<div class="outline-text-2" id="text-21">
<p>
fromList [("1a",fromList [("extraordinary income",fromList [("Agriculture",270000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",100.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",6000.0),("Other",100000.0),("Rents",2150.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",30000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",100.0),("Independent",0.0),("Other",0.0),("Rents",72150.0),("Trade",0.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]),("1b",fromList [("extraordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",6000.0),("Other",60000.0),("Rents",2150.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",20000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",100.0),("Independent",0.0),("Other",0.0),("Rents",72150.0),("Trade",0.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]),("2",fromList [("extraordinary income",fromList [("Agriculture",270000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",100.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",6000.0),("Other",0.0),("Rents",2150.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",30000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",100.0),("Independent",0.0),("Other",0.0),("Rents",72150.0),("Trade",0.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]),("test case 1",fromList [("extraordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",25000.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",72150.0),("Trade",0.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]),("test case 2",fromList [("extraordinary income",fromList [("Agriculture",0.0),("Capital",225000.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",45000.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",5350.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",3200.0),("Trade",0.0)])]),("test case 3",fromList [("extraordinary income",fromList [("Agriculture",0.0),("Capital",225000.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",45000.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",5350.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",3200.0),("Trade",0.0)])]),("test case 3 - fired",fromList [("extraordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",130000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",22000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]),("test case 3 - unfired",fromList [("extraordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("ordinary income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",22000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)]),("special expenses",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])])]
</p>
</div>
</div>
<div id="outline-container-org4fe353a" class="outline-2">
<h2 id="org4fe353a"><span class="section-number-2">22</span> running scenario: 1a</h2>
<div class="outline-text-2" id="text-22">
</div>
<div id="outline-container-orgb0c50bb" class="outline-3">
<h3 id="orgb0c50bb"><span class="section-number-3">22.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-22-1">
<p>
RUNNING - metaFsc squashIncomes
270000.0
100.0
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",300000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",200.0),("Independent",-6000.0),("Other",-100000.0),("Rents",70000.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",300000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",200.0),("Independent",-6000.0),("Other",-100000.0),("Rents",70000.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org86115f7" class="outline-4">
<h4 id="org86115f7"><span class="section-number-4">22.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-22-1-1">
<pre class="example" id="org9add857">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     270000                0                  30000            0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  100                   0                  100              0               
Independent     0                     6000               0                0               
Other           0                     100000             0                0               
Rents           0                     2150               72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orgf2689a1" class="outline-4">
<h4 id="orgf2689a1"><span class="section-number-4">22.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-22-1-2">
<pre class="example" id="org14a69ee">
                combined income  special expenses
Agriculture     300000           0               
Capital         0                0               
Employment      0                0               
Exempt Capital  200              0               
Independent     -6000            0               
Other           -100000          0               
Rents           70000            0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-org649ce11" class="outline-4">
<h4 id="org649ce11"><span class="section-number-4">22.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-22-1-3">
<pre class="example" id="org954015d">
                net income
Agriculture     300000    
Capital         0         
Employment      0         
Exempt Capital  200       
Independent     -6000     
Other           -100000   
Rents           70000     
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-orgde53af7" class="outline-4">
<h4 id="orgde53af7"><span class="section-number-4">22.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-22-1-4">
<pre class="example" id="org825b47a">
                total taxable income
Agriculture     257050              
Capital         0                   
Employment      0                   
Exempt Capital  171                 
Independent     0                   
Other           0                   
Rents           59978               
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-org4483b35" class="outline-4">
<h4 id="org4483b35"><span class="section-number-4">22.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-22-1-5">
<pre class="example" id="org4748674">
       total taxable income
total  317029              

</pre>
</div>
</div>

<div id="outline-container-org214006a" class="outline-4">
<h4 id="org214006a"><span class="section-number-4">22.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-22-1-6">
<pre class="example" id="orgd637fd5">
       total tax payable  total taxable income
total  124355             317029              

</pre>
</div>
</div>
</div>

<div id="outline-container-org7454634" class="outline-3">
<h3 id="org7454634"><span class="section-number-3">22.2</span> explaining section<sub>2</sub><sub>3</sub>: 1a</h3>
<div class="outline-text-3" id="text-22-2">
<dl class="org-dl">
<dt>squashIncomes</dt><dd>for Agriculture, extraordinary 270000.0 + ordinary 30000.0 - expenses 0.0 = pre-net 300000.0</dd>
<dt>squashIncomes</dt><dd>for Exempt Capital, extraordinary 100.0 + ordinary 100.0 - expenses 0.0 = pre-net 200.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 370200.0 exceeds 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will limit deductions to half of the sum of the negative incomes -106000.0 = -53000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>and apply them pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 0.8568342</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Agriculture 300000.0 is positive, multiplying by 0.8568342 = 257050.25</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Exempt Capital 200.0 is positive, multiplying by 0.8568342 = 171.36684</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Independent is negative, resetting to 0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Other is negative, resetting to 0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Rents 70000.0 is positive, multiplying by 0.8568342 = 59978.39</dd>
</dl>
</div>
</div>

<div id="outline-container-org7c1769c" class="outline-3">
<h3 id="org7c1769c"><span class="section-number-3">22.3</span> executing section<sub>34</sub><sub>1</sub>: 1a</h3>
</div>
<div id="outline-container-orgafc5361" class="outline-3">
<h3 id="orgafc5361"><span class="section-number-3">22.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-22-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org9ee7a9f" class="outline-4">
<h4 id="org9ee7a9f"><span class="section-number-4">22.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-22-4-1">
<pre class="example" id="orge74373d">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     270000                0                  30000            0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  100                   0                  100              0               
Independent     0                     6000               0                0               
Other           0                     100000             0                0               
Rents           0                     2150               72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orgb8be8d4" class="outline-4">
<h4 id="orgb8be8d4"><span class="section-number-4">22.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-22-4-2">
<pre class="example" id="org673d46a">
                extraordinary income  pre-net income
Agriculture     270000                30000         
Capital         0                     0             
Employment      0                     0             
Exempt Capital  100                   100           
Independent     0                     -6000         
Other           0                     -100000       
Rents           0                     70000         
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-orgf174a09" class="outline-4">
<h4 id="orgf174a09"><span class="section-number-4">22.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-22-4-3">
<pre class="example" id="orgdddb34d">
                extraordinary income  remaining taxable income
Agriculture     270000                -1768                   
Capital         0                     0                       
Employment      0                     0                       
Exempt Capital  100                   -6                      
Independent     0                     0                       
Other           0                     0                       
Rents           0                     -4126                   
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-orgc4f4ec6" class="outline-4">
<h4 id="orgc4f4ec6"><span class="section-number-4">22.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-22-4-4">
<pre class="example" id="org332e2d4">
       extraordinary income  remaining taxable income
total  270000                -5894                   

</pre>
</div>
</div>

<div id="outline-container-org4fbd0ae" class="outline-4">
<h4 id="org4fbd0ae"><span class="section-number-4">22.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-22-4-5">
<pre class="example" id="orgeca97fc">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  0               54000                 12857            12857         64283                     270000                -5894                     270000              

</pre>
</div>
</div>

<div id="outline-container-orgfdfc472" class="outline-4">
<h4 id="orgfdfc472"><span class="section-number-4">22.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-22-4-6">
<pre class="example" id="orgef7005b">
       0 RTI is negative  1 RTI taxation  1 revised RTI taxation due to sentence 3  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  1                  0               62020                                     54000                 12857            12857         64283                     270000                -5894                     270000              

</pre>
</div>
</div>

<div id="outline-container-orgf195d85" class="outline-4">
<h4 id="orgf195d85"><span class="section-number-4">22.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-22-4-7">
<pre class="example" id="org5dae4c2">
       0 RTI is negative  1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  1                  62020           54000                 12857            12857         64283                     270000                -5894                     270000              

</pre>
</div>
</div>

<div id="outline-container-org925561e" class="outline-4">
<h4 id="org925561e"><span class="section-number-4">22.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-22-4-8">
<pre class="example" id="orgaa15acd">
       0 RTI is negative  total tax payable  total taxable income
total  1                  126303             270000              

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgce5059f" class="outline-2">
<h2 id="orgce5059f"><span class="section-number-2">23</span> running scenario: 1b</h2>
<div class="outline-text-2" id="text-23">
</div>
<div id="outline-container-org577a461" class="outline-3">
<h3 id="org577a461"><span class="section-number-3">23.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-23-1">
<p>
RUNNING - metaFsc squashIncomes
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",20000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",100.0),("Independent",-6000.0),("Other",-60000.0),("Rents",70000.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",20000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",100.0),("Independent",-6000.0),("Other",-60000.0),("Rents",70000.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-orgc3b47be" class="outline-4">
<h4 id="orgc3b47be"><span class="section-number-4">23.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-23-1-1">
<pre class="example" id="orge11f1c9">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  20000            0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  100              0               
Independent     0                     6000               0                0               
Other           0                     60000              0                0               
Rents           0                     2150               72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orgca3a947" class="outline-4">
<h4 id="orgca3a947"><span class="section-number-4">23.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-23-1-2">
<pre class="example" id="orgd6ca2a8">
                combined income  special expenses
Agriculture     20000            0               
Capital         0                0               
Employment      0                0               
Exempt Capital  100              0               
Independent     -6000            0               
Other           -60000           0               
Rents           70000            0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-org8efabe0" class="outline-4">
<h4 id="org8efabe0"><span class="section-number-4">23.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-23-1-3">
<pre class="example" id="orgfc7f92a">
                net income
Agriculture     20000     
Capital         0         
Employment      0         
Exempt Capital  100       
Independent     -6000     
Other           -60000    
Rents           70000     
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-orgc9609f3" class="outline-4">
<h4 id="orgc9609f3"><span class="section-number-4">23.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-23-1-4">
<pre class="example" id="org83a9918">
                total taxable income
Agriculture     5350                
Capital         0                   
Employment      0                   
Exempt Capital  27                  
Independent     0                   
Other           0                   
Rents           18724               
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-org3c0988d" class="outline-4">
<h4 id="org3c0988d"><span class="section-number-4">23.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-23-1-5">
<pre class="example" id="org4b412b0">
       total taxable income
total  24073               

</pre>
</div>
</div>

<div id="outline-container-orgce49c4a" class="outline-4">
<h4 id="orgce49c4a"><span class="section-number-4">23.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-23-1-6">
<pre class="example" id="orgc73e160">
       total tax payable  total taxable income
total  3027               24073               

</pre>
</div>
</div>
</div>

<div id="outline-container-org70067c1" class="outline-3">
<h3 id="org70067c1"><span class="section-number-3">23.2</span> explaining section<sub>2</sub><sub>3</sub>: 1b</h3>
<div class="outline-text-3" id="text-23-2">
<dl class="org-dl">
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 90100.0 is less than 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will not limit deductions to half of the sum of the negative incomes; the deductible amount will be -66000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>we will apply deductions pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 0.26748055</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Agriculture 20000.0 is positive, multiplying by 0.26748055 = 5349.611</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Exempt Capital 100.0 is positive, multiplying by 0.26748055 = 26.748055</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Independent is negative, resetting to 0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Other is negative, resetting to 0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Rents 70000.0 is positive, multiplying by 0.26748055 = 18723.639</dd>
</dl>
</div>
</div>

<div id="outline-container-org74c1a97" class="outline-3">
<h3 id="org74c1a97"><span class="section-number-3">23.3</span> executing section<sub>34</sub><sub>1</sub>: 1b</h3>
</div>
<div id="outline-container-orgf7d7576" class="outline-3">
<h3 id="orgf7d7576"><span class="section-number-3">23.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-23-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
ERROR - runReplaceSc: sanity check failed on keys 1 revised RTI taxation due to sentence 3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org9dcf420" class="outline-4">
<h4 id="org9dcf420"><span class="section-number-4">23.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-23-4-1">
<pre class="example" id="org4ffca0b">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  20000            0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  100              0               
Independent     0                     6000               0                0               
Other           0                     60000              0                0               
Rents           0                     2150               72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orge4e0f36" class="outline-4">
<h4 id="orge4e0f36"><span class="section-number-4">23.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-23-4-2">
<pre class="example" id="org505e849">
                extraordinary income  pre-net income
Agriculture     0                     20000         
Capital         0                     0             
Employment      0                     0             
Exempt Capital  0                     100           
Independent     0                     -6000         
Other           0                     -60000        
Rents           0                     70000         
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-org9f1db07" class="outline-4">
<h4 id="org9f1db07"><span class="section-number-4">23.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-23-4-3">
<pre class="example" id="org0833063">
                extraordinary income  remaining taxable income
Agriculture     0                     5350                    
Capital         0                     0                       
Employment      0                     0                       
Exempt Capital  0                     27                      
Independent     0                     0                       
Other           0                     0                       
Rents           0                     18724                   
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-orga1fdb82" class="outline-4">
<h4 id="orga1fdb82"><span class="section-number-4">23.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-23-4-4">
<pre class="example" id="org9922c5c">
       extraordinary income  remaining taxable income
total  0                     24073                   

</pre>
</div>
</div>

<div id="outline-container-org418af04" class="outline-4">
<h4 id="org418af04"><span class="section-number-4">23.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-23-4-5">
<pre class="example" id="org65fb943">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  3027            24073                 3027             0             0                         0                     24073                     24073               

</pre>
</div>
</div>

<div id="outline-container-org25032fb" class="outline-4">
<h4 id="org25032fb"><span class="section-number-4">23.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-23-4-6">
<pre class="example" id="org7e83220">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  3027            24073                 3027             0             0                         0                     24073                     24073               

</pre>
</div>
</div>

<div id="outline-container-orge43d0c7" class="outline-4">
<h4 id="orge43d0c7"><span class="section-number-4">23.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-23-4-7">
<pre class="example" id="org6763c91">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  3027            24073                 3027             0             0                         0                     24073                     24073               

</pre>
</div>
</div>

<div id="outline-container-orgcd8c519" class="outline-4">
<h4 id="orgcd8c519"><span class="section-number-4">23.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-23-4-8">
<pre class="example" id="org7a1c976">
       total tax payable  total taxable income
total  3027               24073               

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org92a00b6" class="outline-2">
<h2 id="org92a00b6"><span class="section-number-2">24</span> running scenario: 2</h2>
<div class="outline-text-2" id="text-24">
</div>
<div id="outline-container-orgc6e736a" class="outline-3">
<h3 id="orgc6e736a"><span class="section-number-3">24.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-24-1">
<p>
RUNNING - metaFsc squashIncomes
270000.0
100.0
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",300000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",200.0),("Independent",-6000.0),("Other",0.0),("Rents",70000.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",300000.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",200.0),("Independent",-6000.0),("Other",0.0),("Rents",70000.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-orgcd5fe7e" class="outline-4">
<h4 id="orgcd5fe7e"><span class="section-number-4">24.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-24-1-1">
<pre class="example" id="org7a785e1">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     270000                0                  30000            0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  100                   0                  100              0               
Independent     0                     6000               0                0               
Other           0                     0                  0                0               
Rents           0                     2150               72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-org70e789e" class="outline-4">
<h4 id="org70e789e"><span class="section-number-4">24.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-24-1-2">
<pre class="example" id="orgbe6d546">
                combined income  special expenses
Agriculture     300000           0               
Capital         0                0               
Employment      0                0               
Exempt Capital  200              0               
Independent     -6000            0               
Other           0                0               
Rents           70000            0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-orgac47c26" class="outline-4">
<h4 id="orgac47c26"><span class="section-number-4">24.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-24-1-3">
<pre class="example" id="org760cf11">
                net income
Agriculture     300000    
Capital         0         
Employment      0         
Exempt Capital  200       
Independent     -6000     
Other           0         
Rents           70000     
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-org7b6db33" class="outline-4">
<h4 id="org7b6db33"><span class="section-number-4">24.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-24-1-4">
<pre class="example" id="org5a2b17e">
                total taxable income
Agriculture     297569              
Capital         0                   
Employment      0                   
Exempt Capital  198                 
Independent     0                   
Other           0                   
Rents           69433               
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-org695eb2c" class="outline-4">
<h4 id="org695eb2c"><span class="section-number-4">24.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-24-1-5">
<pre class="example" id="orgdeb2f5a">
       total taxable income
total  367002              

</pre>
</div>
</div>

<div id="outline-container-org68f245a" class="outline-4">
<h4 id="org68f245a"><span class="section-number-4">24.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-24-1-6">
<pre class="example" id="org1209bbe">
       total tax payable  total taxable income
total  146843             367002              

</pre>
</div>
</div>
</div>

<div id="outline-container-org71ac085" class="outline-3">
<h3 id="org71ac085"><span class="section-number-3">24.2</span> explaining section<sub>2</sub><sub>3</sub>: 2</h3>
<div class="outline-text-3" id="text-24-2">
<dl class="org-dl">
<dt>squashIncomes</dt><dd>for Agriculture, extraordinary 270000.0 + ordinary 30000.0 - expenses 0.0 = pre-net 300000.0</dd>
<dt>squashIncomes</dt><dd>for Exempt Capital, extraordinary 100.0 + ordinary 100.0 - expenses 0.0 = pre-net 200.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 370200.0 exceeds 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will limit deductions to half of the sum of the negative incomes -6000.0 = -3000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>and apply them pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 0.9918963</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Agriculture 300000.0 is positive, multiplying by 0.9918963 = 297568.88</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Exempt Capital 200.0 is positive, multiplying by 0.9918963 = 198.37926</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Independent is negative, resetting to 0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Rents 70000.0 is positive, multiplying by 0.9918963 = 69432.74</dd>
</dl>
</div>
</div>

<div id="outline-container-orgd511679" class="outline-3">
<h3 id="orgd511679"><span class="section-number-3">24.3</span> executing section<sub>34</sub><sub>1</sub>: 2</h3>
</div>
<div id="outline-container-orgb5f90b1" class="outline-3">
<h3 id="orgb5f90b1"><span class="section-number-3">24.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-24-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
ERROR - runReplaceSc: sanity check failed on keys 1 revised RTI taxation due to sentence 3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org092d3dd" class="outline-4">
<h4 id="org092d3dd"><span class="section-number-4">24.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-24-4-1">
<pre class="example" id="org7b95326">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     270000                0                  30000            0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  100                   0                  100              0               
Independent     0                     6000               0                0               
Other           0                     0                  0                0               
Rents           0                     2150               72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-org090b429" class="outline-4">
<h4 id="org090b429"><span class="section-number-4">24.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-24-4-2">
<pre class="example" id="org2893bfa">
                extraordinary income  pre-net income
Agriculture     270000                30000         
Capital         0                     0             
Employment      0                     0             
Exempt Capital  100                   100           
Independent     0                     -6000         
Other           0                     0             
Rents           0                     70000         
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-orge8dade8" class="outline-4">
<h4 id="orge8dade8"><span class="section-number-4">24.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-24-4-3">
<pre class="example" id="org5585a0d">
                extraordinary income  remaining taxable income
Agriculture     270000                28202                   
Capital         0                     0                       
Employment      0                     0                       
Exempt Capital  100                   94                      
Independent     0                     0                       
Other           0                     0                       
Rents           0                     65804                   
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-orgab8bcc3" class="outline-4">
<h4 id="orgab8bcc3"><span class="section-number-4">24.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-24-4-4">
<pre class="example" id="org0a96f09">
       extraordinary income  remaining taxable income
total  270000                94006                   

</pre>
</div>
</div>

<div id="outline-container-org0ef157a" class="outline-4">
<h4 id="org0ef157a"><span class="section-number-4">24.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-24-4-5">
<pre class="example" id="org4a0ccb5">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  29510           148006                52190            22680         113400                    270000                94006                     364006              

</pre>
</div>
</div>

<div id="outline-container-org1cedf58" class="outline-4">
<h4 id="org1cedf58"><span class="section-number-4">24.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-24-4-6">
<pre class="example" id="orgfed84a6">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  29510           148006                52190            22680         113400                    270000                94006                     364006              

</pre>
</div>
</div>

<div id="outline-container-org11309c0" class="outline-4">
<h4 id="org11309c0"><span class="section-number-4">24.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-24-4-7">
<pre class="example" id="org283bb73">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  29510           148006                52190            22680         113400                    270000                94006                     364006              

</pre>
</div>
</div>

<div id="outline-container-orgd7d3c9e" class="outline-4">
<h4 id="orgd7d3c9e"><span class="section-number-4">24.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-24-4-8">
<pre class="example" id="orge4c18ca">
       total tax payable  total taxable income
total  142910             364006              

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5b3c587" class="outline-2">
<h2 id="org5b3c587"><span class="section-number-2">25</span> running scenario: test case 1</h2>
<div class="outline-text-2" id="text-25">
</div>
<div id="outline-container-orga957240" class="outline-3">
<h3 id="orga957240"><span class="section-number-3">25.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-25-1">
<p>
RUNNING - metaFsc squashIncomes
25000.0
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",97150.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",97150.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org1cc1a5b" class="outline-4">
<h4 id="org1cc1a5b"><span class="section-number-4">25.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-25-1-1">
<pre class="example" id="org64a5a7f">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           25000                 0                  72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-org78bf2ab" class="outline-4">
<h4 id="org78bf2ab"><span class="section-number-4">25.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-25-1-2">
<pre class="example" id="orgceb2d28">
                combined income  special expenses
Agriculture     0                0               
Capital         0                0               
Employment      0                0               
Exempt Capital  0                0               
Independent     0                0               
Other           0                0               
Rents           97150            0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-org438ce7c" class="outline-4">
<h4 id="org438ce7c"><span class="section-number-4">25.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-25-1-3">
<pre class="example" id="org97087f5">
                net income
Agriculture     0         
Capital         0         
Employment      0         
Exempt Capital  0         
Independent     0         
Other           0         
Rents           97150     
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-org5a1128e" class="outline-4">
<h4 id="org5a1128e"><span class="section-number-4">25.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-25-1-4">
<pre class="example" id="orga3e5c7d">
                total taxable income
Agriculture     0                   
Capital         0                   
Employment      0                   
Exempt Capital  0                   
Independent     0                   
Other           0                   
Rents           97150               
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-org3427169" class="outline-4">
<h4 id="org3427169"><span class="section-number-4">25.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-25-1-5">
<pre class="example" id="org2a4e832">
       total taxable income
total  97150               

</pre>
</div>
</div>

<div id="outline-container-orgcb7dfbc" class="outline-4">
<h4 id="orgcb7dfbc"><span class="section-number-4">25.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-25-1-6">
<pre class="example" id="org4db986b">
       total tax payable  total taxable income
total  30830              97150               

</pre>
</div>
</div>
</div>

<div id="outline-container-org279b878" class="outline-3">
<h3 id="org279b878"><span class="section-number-3">25.2</span> explaining section<sub>2</sub><sub>3</sub>: test case 1</h3>
<div class="outline-text-3" id="text-25-2">
<dl class="org-dl">
<dt>squashIncomes</dt><dd>for Rents, extraordinary 25000.0 + ordinary 72150.0 - expenses 0.0 = pre-net 97150.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 97150.0 is less than 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will not limit deductions to half of the sum of the negative incomes; the deductible amount will be 0.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>we will apply deductions pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 1.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Rents 97150.0 is positive, multiplying by 1.0 = 97150.0</dd>
</dl>
</div>
</div>

<div id="outline-container-org56a725c" class="outline-3">
<h3 id="org56a725c"><span class="section-number-3">25.3</span> executing section<sub>34</sub><sub>1</sub>: test case 1</h3>
</div>
<div id="outline-container-org6ac8edc" class="outline-3">
<h3 id="org6ac8edc"><span class="section-number-3">25.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-25-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
ERROR - runReplaceSc: sanity check failed on keys 1 revised RTI taxation due to sentence 3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org413dd84" class="outline-4">
<h4 id="org413dd84"><span class="section-number-4">25.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-25-4-1">
<pre class="example" id="orgedb4a2b">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           25000                 0                  72150            0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orgb685652" class="outline-4">
<h4 id="orgb685652"><span class="section-number-4">25.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-25-4-2">
<pre class="example" id="orga67c9ea">
                extraordinary income  pre-net income
Agriculture     0                     0             
Capital         0                     0             
Employment      0                     0             
Exempt Capital  0                     0             
Independent     0                     0             
Other           0                     0             
Rents           25000                 72150         
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-org9dc80a9" class="outline-4">
<h4 id="org9dc80a9"><span class="section-number-4">25.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-25-4-3">
<pre class="example" id="orge675479">
                extraordinary income  remaining taxable income
Agriculture     0                     0                       
Capital         0                     0                       
Employment      0                     0                       
Exempt Capital  0                     0                       
Independent     0                     0                       
Other           0                     0                       
Rents           25000                 72150                   
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-orgd3474eb" class="outline-4">
<h4 id="orgd3474eb"><span class="section-number-4">25.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-25-4-4">
<pre class="example" id="orgdee7afe">
       extraordinary income  remaining taxable income
total  25000                 72150                   

</pre>
</div>
</div>

<div id="outline-container-org36b60c5" class="outline-4">
<h4 id="org36b60c5"><span class="section-number-4">25.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-25-4-5">
<pre class="example" id="orgc4d94fd">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  20330           77150                 22430            2100          10500                     25000                 72150                     97150               

</pre>
</div>
</div>

<div id="outline-container-org6cc15dd" class="outline-4">
<h4 id="org6cc15dd"><span class="section-number-4">25.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-25-4-6">
<pre class="example" id="org9ea7c31">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  20330           77150                 22430            2100          10500                     25000                 72150                     97150               

</pre>
</div>
</div>

<div id="outline-container-org5276486" class="outline-4">
<h4 id="org5276486"><span class="section-number-4">25.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-25-4-7">
<pre class="example" id="orgb3848f1">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  20330           77150                 22430            2100          10500                     25000                 72150                     97150               

</pre>
</div>
</div>

<div id="outline-container-org95d98b6" class="outline-4">
<h4 id="org95d98b6"><span class="section-number-4">25.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-25-4-8">
<pre class="example" id="org9c9461a">
       total tax payable  total taxable income
total  30830              97150               

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0f0a606" class="outline-2">
<h2 id="org0f0a606"><span class="section-number-2">26</span> running scenario: test case 2</h2>
<div class="outline-text-2" id="text-26">
</div>
<div id="outline-container-org363d37b" class="outline-3">
<h3 id="org363d37b"><span class="section-number-3">26.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-26-1">
<p>
RUNNING - metaFsc squashIncomes
225000.0
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",0.0),("Capital",225000.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",-48200.0),("Trade",5350.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",0.0),("Capital",225000.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",-48200.0),("Trade",5350.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org7d785f4" class="outline-4">
<h4 id="org7d785f4"><span class="section-number-4">26.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-26-1-1">
<pre class="example" id="orgcd6d4a8">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         225000                0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     45000              0                3200            
Trade           0                     0                  5350             0               

</pre>
</div>
</div>

<div id="outline-container-org5189a3e" class="outline-4">
<h4 id="org5189a3e"><span class="section-number-4">26.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-26-1-2">
<pre class="example" id="orga7fe948">
                combined income  special expenses
Agriculture     0                0               
Capital         225000           0               
Employment      0                0               
Exempt Capital  0                0               
Independent     0                0               
Other           0                0               
Rents           -45000           3200            
Trade           5350             0               

</pre>
</div>
</div>

<div id="outline-container-org7aa1508" class="outline-4">
<h4 id="org7aa1508"><span class="section-number-4">26.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-26-1-3">
<pre class="example" id="orgecccb36">
                net income
Agriculture     0         
Capital         225000    
Employment      0         
Exempt Capital  0         
Independent     0         
Other           0         
Rents           -48200    
Trade           5350      

</pre>
</div>
</div>

<div id="outline-container-org21c1601" class="outline-4">
<h4 id="org21c1601"><span class="section-number-4">26.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-26-1-4">
<pre class="example" id="org7352dac">
                total taxable income
Agriculture     0                   
Capital         201460              
Employment      0                   
Exempt Capital  0                   
Independent     0                   
Other           0                   
Rents           0                   
Trade           4790                

</pre>
</div>
</div>

<div id="outline-container-org0564e58" class="outline-4">
<h4 id="org0564e58"><span class="section-number-4">26.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-26-1-5">
<pre class="example" id="org1a85418">
       total taxable income
total  206250              

</pre>
</div>
</div>

<div id="outline-container-orgf50d430" class="outline-4">
<h4 id="orgf50d430"><span class="section-number-4">26.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-26-1-6">
<pre class="example" id="orgfe9674f">
       total tax payable  total taxable income
total  76652              206250              

</pre>
</div>
</div>
</div>

<div id="outline-container-org8dd7712" class="outline-3">
<h3 id="org8dd7712"><span class="section-number-3">26.2</span> explaining section<sub>2</sub><sub>3</sub>: test case 2</h3>
<div class="outline-text-3" id="text-26-2">
<dl class="org-dl">
<dt>squashIncomes</dt><dd>for Capital, extraordinary 225000.0 + ordinary 0.0 - expenses 0.0 = pre-net 225000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 230350.0 exceeds 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will limit deductions to half of the sum of the negative incomes -48200.0 = -24100.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>and apply them pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 0.8953766</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Capital 225000.0 is positive, multiplying by 0.8953766 = 201459.73</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Rents is negative, resetting to 0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Trade 5350.0 is positive, multiplying by 0.8953766 = 4790.265</dd>
</dl>
</div>
</div>

<div id="outline-container-orgb7972e8" class="outline-3">
<h3 id="orgb7972e8"><span class="section-number-3">26.3</span> executing section<sub>34</sub><sub>1</sub>: test case 2</h3>
</div>
<div id="outline-container-org2b548cf" class="outline-3">
<h3 id="org2b548cf"><span class="section-number-3">26.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-26-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org3f2a459" class="outline-4">
<h4 id="org3f2a459"><span class="section-number-4">26.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-26-4-1">
<pre class="example" id="org5bd122f">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         225000                0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     45000              0                3200            
Trade           0                     0                  5350             0               

</pre>
</div>
</div>

<div id="outline-container-org009ad68" class="outline-4">
<h4 id="org009ad68"><span class="section-number-4">26.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-26-4-2">
<pre class="example" id="org6588e20">
                extraordinary income  pre-net income
Agriculture     0                     0             
Capital         225000                0             
Employment      0                     0             
Exempt Capital  0                     0             
Independent     0                     0             
Other           0                     0             
Rents           0                     -48200        
Trade           0                     5350          

</pre>
</div>
</div>

<div id="outline-container-org9d5029d" class="outline-4">
<h4 id="org9d5029d"><span class="section-number-4">26.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-26-4-3">
<pre class="example" id="orgae2e1a3">
                extraordinary income  remaining taxable income
Agriculture     0                     0                       
Capital         225000                0                       
Employment      0                     0                       
Exempt Capital  0                     0                       
Independent     0                     0                       
Other           0                     0                       
Rents           0                     0                       
Trade           0                     -42850                  

</pre>
</div>
</div>

<div id="outline-container-orge34d815" class="outline-4">
<h4 id="orge34d815"><span class="section-number-4">26.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-26-4-4">
<pre class="example" id="orgabdb1c8">
       extraordinary income  remaining taxable income
total  225000                -42850                  

</pre>
</div>
</div>

<div id="outline-container-org0b1c684" class="outline-4">
<h4 id="org0b1c684"><span class="section-number-4">26.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-26-4-5">
<pre class="example" id="orge5519ff">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  0               45000                 9538             9538          47689                     225000                -42850                    225000              

</pre>
</div>
</div>

<div id="outline-container-org71bffa4" class="outline-4">
<h4 id="org71bffa4"><span class="section-number-4">26.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-26-4-6">
<pre class="example" id="orgcdc0815">
       0 RTI is negative  1 RTI taxation  1 revised RTI taxation due to sentence 3  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  1                  0               33339                                     45000                 9538             9538          47689                     225000                -42850                    225000              

</pre>
</div>
</div>

<div id="outline-container-org89e796f" class="outline-4">
<h4 id="org89e796f"><span class="section-number-4">26.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-26-4-7">
<pre class="example" id="org14bfe24">
       0 RTI is negative  1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  1                  33339           45000                 9538             9538          47689                     225000                -42850                    225000              

</pre>
</div>
</div>

<div id="outline-container-org31d28c3" class="outline-4">
<h4 id="org31d28c3"><span class="section-number-4">26.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-26-4-8">
<pre class="example" id="org15ec640">
       0 RTI is negative  total tax payable  total taxable income
total  1                  81028              225000              

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgad54e63" class="outline-2">
<h2 id="orgad54e63"><span class="section-number-2">27</span> running scenario: test case 3</h2>
<div class="outline-text-2" id="text-27">
</div>
<div id="outline-container-orgdf03ca0" class="outline-3">
<h3 id="orgdf03ca0"><span class="section-number-3">27.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-27-1">
<p>
RUNNING - metaFsc squashIncomes
225000.0
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",0.0),("Capital",225000.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",-48200.0),("Trade",5350.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",0.0),("Capital",225000.0),("Employment",0.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",-48200.0),("Trade",5350.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org24a33b9" class="outline-4">
<h4 id="org24a33b9"><span class="section-number-4">27.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-27-1-1">
<pre class="example" id="org677b88e">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         225000                0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     45000              0                3200            
Trade           0                     0                  5350             0               

</pre>
</div>
</div>

<div id="outline-container-org1f76230" class="outline-4">
<h4 id="org1f76230"><span class="section-number-4">27.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-27-1-2">
<pre class="example" id="org39551cd">
                combined income  special expenses
Agriculture     0                0               
Capital         225000           0               
Employment      0                0               
Exempt Capital  0                0               
Independent     0                0               
Other           0                0               
Rents           -45000           3200            
Trade           5350             0               

</pre>
</div>
</div>

<div id="outline-container-org5ca5eb6" class="outline-4">
<h4 id="org5ca5eb6"><span class="section-number-4">27.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-27-1-3">
<pre class="example" id="org1554bca">
                net income
Agriculture     0         
Capital         225000    
Employment      0         
Exempt Capital  0         
Independent     0         
Other           0         
Rents           -48200    
Trade           5350      

</pre>
</div>
</div>

<div id="outline-container-orgd03661b" class="outline-4">
<h4 id="orgd03661b"><span class="section-number-4">27.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-27-1-4">
<pre class="example" id="org53c06a2">
                total taxable income
Agriculture     0                   
Capital         201460              
Employment      0                   
Exempt Capital  0                   
Independent     0                   
Other           0                   
Rents           0                   
Trade           4790                

</pre>
</div>
</div>

<div id="outline-container-org7acc2d7" class="outline-4">
<h4 id="org7acc2d7"><span class="section-number-4">27.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-27-1-5">
<pre class="example" id="org35466f6">
       total taxable income
total  206250              

</pre>
</div>
</div>

<div id="outline-container-orgb8521c1" class="outline-4">
<h4 id="orgb8521c1"><span class="section-number-4">27.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-27-1-6">
<pre class="example" id="org0fcaa58">
       total tax payable  total taxable income
total  76652              206250              

</pre>
</div>
</div>
</div>

<div id="outline-container-org77f10b7" class="outline-3">
<h3 id="org77f10b7"><span class="section-number-3">27.2</span> explaining section<sub>2</sub><sub>3</sub>: test case 3</h3>
<div class="outline-text-3" id="text-27-2">
<dl class="org-dl">
<dt>squashIncomes</dt><dd>for Capital, extraordinary 225000.0 + ordinary 0.0 - expenses 0.0 = pre-net 225000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 230350.0 exceeds 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will limit deductions to half of the sum of the negative incomes -48200.0 = -24100.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>and apply them pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 0.8953766</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Capital 225000.0 is positive, multiplying by 0.8953766 = 201459.73</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Rents is negative, resetting to 0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Trade 5350.0 is positive, multiplying by 0.8953766 = 4790.265</dd>
</dl>
</div>
</div>

<div id="outline-container-org5c274bf" class="outline-3">
<h3 id="org5c274bf"><span class="section-number-3">27.3</span> executing section<sub>34</sub><sub>1</sub>: test case 3</h3>
</div>
<div id="outline-container-orge201d45" class="outline-3">
<h3 id="orge201d45"><span class="section-number-3">27.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-27-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org16442cc" class="outline-4">
<h4 id="org16442cc"><span class="section-number-4">27.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-27-4-1">
<pre class="example" id="orgaf2564b">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         225000                0                  0                0               
Employment      0                     0                  0                0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     45000              0                3200            
Trade           0                     0                  5350             0               

</pre>
</div>
</div>

<div id="outline-container-orgdacbd21" class="outline-4">
<h4 id="orgdacbd21"><span class="section-number-4">27.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-27-4-2">
<pre class="example" id="orgbf921c1">
                extraordinary income  pre-net income
Agriculture     0                     0             
Capital         225000                0             
Employment      0                     0             
Exempt Capital  0                     0             
Independent     0                     0             
Other           0                     0             
Rents           0                     -48200        
Trade           0                     5350          

</pre>
</div>
</div>

<div id="outline-container-org0bd855c" class="outline-4">
<h4 id="org0bd855c"><span class="section-number-4">27.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-27-4-3">
<pre class="example" id="org39396ae">
                extraordinary income  remaining taxable income
Agriculture     0                     0                       
Capital         225000                0                       
Employment      0                     0                       
Exempt Capital  0                     0                       
Independent     0                     0                       
Other           0                     0                       
Rents           0                     0                       
Trade           0                     -42850                  

</pre>
</div>
</div>

<div id="outline-container-orgbfdc053" class="outline-4">
<h4 id="orgbfdc053"><span class="section-number-4">27.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-27-4-4">
<pre class="example" id="org9e7005f">
       extraordinary income  remaining taxable income
total  225000                -42850                  

</pre>
</div>
</div>

<div id="outline-container-org1d3ef7e" class="outline-4">
<h4 id="org1d3ef7e"><span class="section-number-4">27.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-27-4-5">
<pre class="example" id="orgb99800d">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  0               45000                 9538             9538          47689                     225000                -42850                    225000              

</pre>
</div>
</div>

<div id="outline-container-orga5b2c28" class="outline-4">
<h4 id="orga5b2c28"><span class="section-number-4">27.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-27-4-6">
<pre class="example" id="org6a34f5d">
       0 RTI is negative  1 RTI taxation  1 revised RTI taxation due to sentence 3  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  1                  0               33339                                     45000                 9538             9538          47689                     225000                -42850                    225000              

</pre>
</div>
</div>

<div id="outline-container-org3c875ab" class="outline-4">
<h4 id="org3c875ab"><span class="section-number-4">27.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-27-4-7">
<pre class="example" id="org171790e">
       0 RTI is negative  1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  1                  33339           45000                 9538             9538          47689                     225000                -42850                    225000              

</pre>
</div>
</div>

<div id="outline-container-org56be61b" class="outline-4">
<h4 id="org56be61b"><span class="section-number-4">27.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-27-4-8">
<pre class="example" id="orgce6f4e5">
       0 RTI is negative  total tax payable  total taxable income
total  1                  81028              225000              

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc7f2d2c" class="outline-2">
<h2 id="orgc7f2d2c"><span class="section-number-2">28</span> running scenario: test case 3 - fired</h2>
<div class="outline-text-2" id="text-28">
</div>
<div id="outline-container-org0a546d7" class="outline-3">
<h3 id="org0a546d7"><span class="section-number-3">28.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-28-1">
<p>
RUNNING - metaFsc squashIncomes
130000.0
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",152000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",152000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org8e350b3" class="outline-4">
<h4 id="org8e350b3"><span class="section-number-4">28.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-28-1-1">
<pre class="example" id="org89c8949">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      130000                0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orga5cffe9" class="outline-4">
<h4 id="orga5cffe9"><span class="section-number-4">28.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-28-1-2">
<pre class="example" id="org5d97fe6">
                combined income  special expenses
Agriculture     0                0               
Capital         0                0               
Employment      152000           0               
Exempt Capital  0                0               
Independent     0                0               
Other           0                0               
Rents           0                0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-orgfb407e5" class="outline-4">
<h4 id="orgfb407e5"><span class="section-number-4">28.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-28-1-3">
<pre class="example" id="org450f35a">
                net income
Agriculture     0         
Capital         0         
Employment      152000    
Exempt Capital  0         
Independent     0         
Other           0         
Rents           0         
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-org594139d" class="outline-4">
<h4 id="org594139d"><span class="section-number-4">28.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-28-1-4">
<pre class="example" id="orge49e918">
                total taxable income
Agriculture     0                   
Capital         0                   
Employment      152000              
Exempt Capital  0                   
Independent     0                   
Other           0                   
Rents           0                   
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-org93b163e" class="outline-4">
<h4 id="org93b163e"><span class="section-number-4">28.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-28-1-5">
<pre class="example" id="orgccb2d50">
       total taxable income
total  152000              

</pre>
</div>
</div>

<div id="outline-container-org1aa3fcc" class="outline-4">
<h4 id="org1aa3fcc"><span class="section-number-4">28.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-28-1-6">
<pre class="example" id="orge4ab5ea">
       total tax payable  total taxable income
total  53867              152000              

</pre>
</div>
</div>
</div>

<div id="outline-container-org92f0838" class="outline-3">
<h3 id="org92f0838"><span class="section-number-3">28.2</span> explaining section<sub>2</sub><sub>3</sub>: test case 3 - fired</h3>
<div class="outline-text-3" id="text-28-2">
<dl class="org-dl">
<dt>squashIncomes</dt><dd>for Employment, extraordinary 130000.0 + ordinary 22000.0 - expenses 0.0 = pre-net 152000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 152000.0 exceeds 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will limit deductions to half of the sum of the negative incomes 0.0 = 0.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>and apply them pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 1.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Employment 152000.0 is positive, multiplying by 1.0 = 152000.0</dd>
</dl>
</div>
</div>

<div id="outline-container-org90dff37" class="outline-3">
<h3 id="org90dff37"><span class="section-number-3">28.3</span> executing section<sub>34</sub><sub>1</sub>: test case 3 - fired</h3>
</div>
<div id="outline-container-orga4d40ee" class="outline-3">
<h3 id="orga4d40ee"><span class="section-number-3">28.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-28-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
ERROR - runReplaceSc: sanity check failed on keys 1 revised RTI taxation due to sentence 3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org12607b2" class="outline-4">
<h4 id="org12607b2"><span class="section-number-4">28.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-28-4-1">
<pre class="example" id="orgd7e13f3">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      130000                0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-org4ec17e0" class="outline-4">
<h4 id="org4ec17e0"><span class="section-number-4">28.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-28-4-2">
<pre class="example" id="orgbf26501">
                extraordinary income  pre-net income
Agriculture     0                     0             
Capital         0                     0             
Employment      130000                22000         
Exempt Capital  0                     0             
Independent     0                     0             
Other           0                     0             
Rents           0                     0             
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-org7234585" class="outline-4">
<h4 id="org7234585"><span class="section-number-4">28.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-28-4-3">
<pre class="example" id="org0f157f1">
                extraordinary income  remaining taxable income
Agriculture     0                     0                       
Capital         0                     0                       
Employment      130000                22000                   
Exempt Capital  0                     0                       
Independent     0                     0                       
Other           0                     0                       
Rents           0                     0                       
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-orgd7a873e" class="outline-4">
<h4 id="orgd7a873e"><span class="section-number-4">28.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-28-4-4">
<pre class="example" id="org7743470">
       extraordinary income  remaining taxable income
total  130000                22000                   

</pre>
</div>
</div>

<div id="outline-container-orgfffaf76" class="outline-4">
<h4 id="orgfffaf76"><span class="section-number-4">28.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-28-4-5">
<pre class="example" id="org17255ae">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            48000                 10609            8135          40675                     130000                22000                     152000              

</pre>
</div>
</div>

<div id="outline-container-org5b0ee21" class="outline-4">
<h4 id="org5b0ee21"><span class="section-number-4">28.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-28-4-6">
<pre class="example" id="org22d63ee">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            48000                 10609            8135          40675                     130000                22000                     152000              

</pre>
</div>
</div>

<div id="outline-container-org0c18dd7" class="outline-4">
<h4 id="org0c18dd7"><span class="section-number-4">28.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-28-4-7">
<pre class="example" id="orgb899044">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            48000                 10609            8135          40675                     130000                22000                     152000              

</pre>
</div>
</div>

<div id="outline-container-org3112230" class="outline-4">
<h4 id="org3112230"><span class="section-number-4">28.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-28-4-8">
<pre class="example" id="orga1a5a86">
       total tax payable  total taxable income
total  43150              152000              

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org73bca46" class="outline-2">
<h2 id="org73bca46"><span class="section-number-2">29</span> running scenario: test case 3 - unfired</h2>
<div class="outline-text-2" id="text-29">
</div>
<div id="outline-container-org4bd4d70" class="outline-3">
<h3 id="org4bd4d70"><span class="section-number-3">29.1</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-29-1">
<p>
RUNNING - metaFsc squashIncomes
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",22000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",22000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org724b58d" class="outline-4">
<h4 id="org724b58d"><span class="section-number-4">29.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-29-1-1">
<pre class="example" id="org86efd1b">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      0                     0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-org525b557" class="outline-4">
<h4 id="org525b557"><span class="section-number-4">29.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-29-1-2">
<pre class="example" id="org83d5982">
                combined income  special expenses
Agriculture     0                0               
Capital         0                0               
Employment      22000            0               
Exempt Capital  0                0               
Independent     0                0               
Other           0                0               
Rents           0                0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-org839c3f8" class="outline-4">
<h4 id="org839c3f8"><span class="section-number-4">29.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-29-1-3">
<pre class="example" id="org962bf81">
                net income
Agriculture     0         
Capital         0         
Employment      22000     
Exempt Capital  0         
Independent     0         
Other           0         
Rents           0         
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-org2b1645b" class="outline-4">
<h4 id="org2b1645b"><span class="section-number-4">29.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-29-1-4">
<pre class="example" id="org9bd4849">
                total taxable income
Agriculture     0                   
Capital         0                   
Employment      22000               
Exempt Capital  0                   
Independent     0                   
Other           0                   
Rents           0                   
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-orgc38ef78" class="outline-4">
<h4 id="orgc38ef78"><span class="section-number-4">29.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-29-1-5">
<pre class="example" id="orgb038105">
       total taxable income
total  22000               

</pre>
</div>
</div>

<div id="outline-container-org35069ec" class="outline-4">
<h4 id="org35069ec"><span class="section-number-4">29.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-29-1-6">
<pre class="example" id="orgb9205b7">
       total tax payable  total taxable income
total  2474               22000               

</pre>
</div>
</div>
</div>

<div id="outline-container-org788a264" class="outline-3">
<h3 id="org788a264"><span class="section-number-3">29.2</span> explaining section<sub>2</sub><sub>3</sub>: test case 3 - unfired</h3>
<div class="outline-text-3" id="text-29-2">
<dl class="org-dl">
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 22000.0 is less than 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will not limit deductions to half of the sum of the negative incomes; the deductible amount will be 0.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>we will apply deductions pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 1.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Employment 22000.0 is positive, multiplying by 1.0 = 22000.0</dd>
</dl>
</div>
</div>

<div id="outline-container-orgab39ef2" class="outline-3">
<h3 id="orgab39ef2"><span class="section-number-3">29.3</span> executing section<sub>34</sub><sub>1</sub>: test case 3 - unfired</h3>
</div>
<div id="outline-container-orgf70e51a" class="outline-3">
<h3 id="orgf70e51a"><span class="section-number-3">29.4</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-29-4">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
ERROR - runReplaceSc: sanity check failed on keys 1 revised RTI taxation due to sentence 3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org62adfdd" class="outline-4">
<h4 id="org62adfdd"><span class="section-number-4">29.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-29-4-1">
<pre class="example" id="org555a9fb">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      0                     0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orgc248fb6" class="outline-4">
<h4 id="orgc248fb6"><span class="section-number-4">29.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-29-4-2">
<pre class="example" id="org74c321f">
                extraordinary income  pre-net income
Agriculture     0                     0             
Capital         0                     0             
Employment      0                     22000         
Exempt Capital  0                     0             
Independent     0                     0             
Other           0                     0             
Rents           0                     0             
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-orgddb69d1" class="outline-4">
<h4 id="orgddb69d1"><span class="section-number-4">29.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-29-4-3">
<pre class="example" id="orgd242399">
                extraordinary income  remaining taxable income
Agriculture     0                     0                       
Capital         0                     0                       
Employment      0                     22000                   
Exempt Capital  0                     0                       
Independent     0                     0                       
Other           0                     0                       
Rents           0                     0                       
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-org7b80bec" class="outline-4">
<h4 id="org7b80bec"><span class="section-number-4">29.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-29-4-4">
<pre class="example" id="org789570d">
       extraordinary income  remaining taxable income
total  0                     22000                   

</pre>
</div>
</div>

<div id="outline-container-org79740eb" class="outline-4">
<h4 id="org79740eb"><span class="section-number-4">29.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-29-4-5">
<pre class="example" id="orgc8d1ccd">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            22000                 2474             0             0                         0                     22000                     22000               

</pre>
</div>
</div>

<div id="outline-container-orgf142da4" class="outline-4">
<h4 id="orgf142da4"><span class="section-number-4">29.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-29-4-6">
<pre class="example" id="org12d8d92">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            22000                 2474             0             0                         0                     22000                     22000               

</pre>
</div>
</div>

<div id="outline-container-orgb86c329" class="outline-4">
<h4 id="orgb86c329"><span class="section-number-4">29.4.7</span> step 7</h4>
<div class="outline-text-4" id="text-29-4-7">
<pre class="example" id="orgad18d53">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            22000                 2474             0             0                         0                     22000                     22000               

</pre>
</div>
</div>

<div id="outline-container-org0933668" class="outline-4">
<h4 id="org0933668"><span class="section-number-4">29.4.8</span> step 8</h4>
<div class="outline-text-4" id="text-29-4-8">
<pre class="example" id="org6214062">
       total tax payable  total taxable income
total  2474               22000               

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7bf7f6e" class="outline-2">
<h2 id="org7bf7f6e"><span class="section-number-2">30</span> which tax method shall we use to deal with extraordinary income in test case 3?</h2>
<div class="outline-text-2" id="text-30">
</div>
<div id="outline-container-orgdc46901" class="outline-3">
<h3 id="orgdc46901"><span class="section-number-3">30.1</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-30-1">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
ERROR - runReplaceSc: sanity check failed on keys 1 revised RTI taxation due to sentence 3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org79b947d" class="outline-4">
<h4 id="org79b947d"><span class="section-number-4">30.1.1</span> step 1</h4>
<div class="outline-text-4" id="text-30-1-1">
<pre class="example" id="orgc829384">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      130000                0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orgac01496" class="outline-4">
<h4 id="orgac01496"><span class="section-number-4">30.1.2</span> step 2</h4>
<div class="outline-text-4" id="text-30-1-2">
<pre class="example" id="org64053aa">
                extraordinary income  pre-net income
Agriculture     0                     0             
Capital         0                     0             
Employment      130000                22000         
Exempt Capital  0                     0             
Independent     0                     0             
Other           0                     0             
Rents           0                     0             
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-org083d128" class="outline-4">
<h4 id="org083d128"><span class="section-number-4">30.1.3</span> step 3</h4>
<div class="outline-text-4" id="text-30-1-3">
<pre class="example" id="org2983901">
                extraordinary income  remaining taxable income
Agriculture     0                     0                       
Capital         0                     0                       
Employment      130000                22000                   
Exempt Capital  0                     0                       
Independent     0                     0                       
Other           0                     0                       
Rents           0                     0                       
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-org4bfeaf0" class="outline-4">
<h4 id="org4bfeaf0"><span class="section-number-4">30.1.4</span> step 4</h4>
<div class="outline-text-4" id="text-30-1-4">
<pre class="example" id="org875a978">
       extraordinary income  remaining taxable income
total  130000                22000                   

</pre>
</div>
</div>

<div id="outline-container-org876e79a" class="outline-4">
<h4 id="org876e79a"><span class="section-number-4">30.1.5</span> step 5</h4>
<div class="outline-text-4" id="text-30-1-5">
<pre class="example" id="org83efe48">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            48000                 10609            8135          40675                     130000                22000                     152000              

</pre>
</div>
</div>

<div id="outline-container-org432bb56" class="outline-4">
<h4 id="org432bb56"><span class="section-number-4">30.1.6</span> step 6</h4>
<div class="outline-text-4" id="text-30-1-6">
<pre class="example" id="org1af1ee8">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            48000                 10609            8135          40675                     130000                22000                     152000              

</pre>
</div>
</div>

<div id="outline-container-org39221fb" class="outline-4">
<h4 id="org39221fb"><span class="section-number-4">30.1.7</span> step 7</h4>
<div class="outline-text-4" id="text-30-1-7">
<pre class="example" id="org13b3cfa">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            48000                 10609            8135          40675                     130000                22000                     152000              

</pre>
</div>
</div>

<div id="outline-container-org28264d0" class="outline-4">
<h4 id="org28264d0"><span class="section-number-4">30.1.8</span> step 8</h4>
<div class="outline-text-4" id="text-30-1-8">
<pre class="example" id="org316e630">
       total tax payable  total taxable income
total  43150              152000              

</pre>
</div>
</div>
</div>

<div id="outline-container-org7756bd8" class="outline-3">
<h3 id="org7756bd8"><span class="section-number-3">30.2</span> executing section 34.1</h3>
<div class="outline-text-3" id="text-30-2">
<p>
RUNNING - metaFsc preNetIncome
RUNNING - offsetLosses
RUNNING - squashCats
RUNNING - extraordinary
RUNNING - sentence3
ERROR - runReplaceSc: sanity check failed on keys 1 revised RTI taxation due to sentence 3
RUNNING - totalPayable
</p>
</div>
<div id="outline-container-org3e1d5fa" class="outline-4">
<h4 id="org3e1d5fa"><span class="section-number-4">30.2.1</span> step 1</h4>
<div class="outline-text-4" id="text-30-2-1">
<pre class="example" id="org14ce1c0">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      0                     0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-orgc358298" class="outline-4">
<h4 id="orgc358298"><span class="section-number-4">30.2.2</span> step 2</h4>
<div class="outline-text-4" id="text-30-2-2">
<pre class="example" id="org6ccc5c0">
                extraordinary income  pre-net income
Agriculture     0                     0             
Capital         0                     0             
Employment      0                     22000         
Exempt Capital  0                     0             
Independent     0                     0             
Other           0                     0             
Rents           0                     0             
Trade           0                     0             

</pre>
</div>
</div>

<div id="outline-container-org5fde2ae" class="outline-4">
<h4 id="org5fde2ae"><span class="section-number-4">30.2.3</span> step 3</h4>
<div class="outline-text-4" id="text-30-2-3">
<pre class="example" id="org15b39bc">
                extraordinary income  remaining taxable income
Agriculture     0                     0                       
Capital         0                     0                       
Employment      0                     22000                   
Exempt Capital  0                     0                       
Independent     0                     0                       
Other           0                     0                       
Rents           0                     0                       
Trade           0                     0                       

</pre>
</div>
</div>

<div id="outline-container-orgc85b9f3" class="outline-4">
<h4 id="orgc85b9f3"><span class="section-number-4">30.2.4</span> step 4</h4>
<div class="outline-text-4" id="text-30-2-4">
<pre class="example" id="org6966a48">
       extraordinary income  remaining taxable income
total  0                     22000                   

</pre>
</div>
</div>

<div id="outline-container-org6f16185" class="outline-4">
<h4 id="org6f16185"><span class="section-number-4">30.2.5</span> step 5</h4>
<div class="outline-text-4" id="text-30-2-5">
<pre class="example" id="orga5842f5">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            22000                 2474             0             0                         0                     22000                     22000               

</pre>
</div>
</div>

<div id="outline-container-org1b88227" class="outline-4">
<h4 id="org1b88227"><span class="section-number-4">30.2.6</span> step 6</h4>
<div class="outline-text-4" id="text-30-2-6">
<pre class="example" id="org09a5d40">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            22000                 2474             0             0                         0                     22000                     22000               

</pre>
</div>
</div>

<div id="outline-container-orgc3de824" class="outline-4">
<h4 id="orgc3de824"><span class="section-number-4">30.2.7</span> step 7</h4>
<div class="outline-text-4" id="text-30-2-7">
<pre class="example" id="org3f7ec12">
       1 RTI taxation  2 RTI plus one fifth  3 tax on RTI+.2  4 difference  5 extraordinary taxation  extraordinary income  remaining taxable income  total taxable income
total  2474            22000                 2474             0             0                         0                     22000                     22000               

</pre>
</div>
</div>

<div id="outline-container-org6ac288d" class="outline-4">
<h4 id="org6ac288d"><span class="section-number-4">30.2.8</span> step 8</h4>
<div class="outline-text-4" id="text-30-2-8">
<pre class="example" id="orgb17bbc3">
       total tax payable  total taxable income
total  2474               22000               

</pre>
</div>
</div>
</div>

<div id="outline-container-org6f2cf21" class="outline-3">
<h3 id="org6f2cf21"><span class="section-number-3">30.3</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-30-3">
<p>
RUNNING - metaFsc squashIncomes
130000.0
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",152000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",152000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org9a5990b" class="outline-4">
<h4 id="org9a5990b"><span class="section-number-4">30.3.1</span> step 1</h4>
<div class="outline-text-4" id="text-30-3-1">
<pre class="example" id="org3226fd1">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      130000                0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-org3e4df48" class="outline-4">
<h4 id="org3e4df48"><span class="section-number-4">30.3.2</span> step 2</h4>
<div class="outline-text-4" id="text-30-3-2">
<pre class="example" id="org12b8420">
                combined income  special expenses
Agriculture     0                0               
Capital         0                0               
Employment      152000           0               
Exempt Capital  0                0               
Independent     0                0               
Other           0                0               
Rents           0                0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-org5679544" class="outline-4">
<h4 id="org5679544"><span class="section-number-4">30.3.3</span> step 3</h4>
<div class="outline-text-4" id="text-30-3-3">
<pre class="example" id="org760b671">
                net income
Agriculture     0         
Capital         0         
Employment      152000    
Exempt Capital  0         
Independent     0         
Other           0         
Rents           0         
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-orgaf98a7d" class="outline-4">
<h4 id="orgaf98a7d"><span class="section-number-4">30.3.4</span> step 4</h4>
<div class="outline-text-4" id="text-30-3-4">
<pre class="example" id="orgcbe2042">
                total taxable income
Agriculture     0                   
Capital         0                   
Employment      152000              
Exempt Capital  0                   
Independent     0                   
Other           0                   
Rents           0                   
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-org3df751e" class="outline-4">
<h4 id="org3df751e"><span class="section-number-4">30.3.5</span> step 5</h4>
<div class="outline-text-4" id="text-30-3-5">
<pre class="example" id="orgc4e9ea3">
       total taxable income
total  152000              

</pre>
</div>
</div>

<div id="outline-container-org400e4a8" class="outline-4">
<h4 id="org400e4a8"><span class="section-number-4">30.3.6</span> step 6</h4>
<div class="outline-text-4" id="text-30-3-6">
<pre class="example" id="org530d199">
       total tax payable  total taxable income
total  53867              152000              

</pre>
</div>
</div>
</div>

<div id="outline-container-org3cdb5b3" class="outline-3">
<h3 id="org3cdb5b3"><span class="section-number-3">30.4</span> executing section 2.3</h3>
<div class="outline-text-3" id="text-30-4">
<p>
RUNNING - metaFsc squashIncomes
RETURNING - metaFsc squashIncomes
RUNNING - metaFsc netIncome
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",22000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RETURNING - metaFsc netIncome
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub>
fromList [("net income",fromList [("Agriculture",0.0),("Capital",0.0),("Employment",22000.0),("Exempt Capital",0.0),("Independent",0.0),("Other",0.0),("Rents",0.0),("Trade",0.0)])]
RUNNING - offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub> printed sc
RUNNING - squashCats
RUNNING - ordinaryPayable
</p>
</div>
<div id="outline-container-org1236d68" class="outline-4">
<h4 id="org1236d68"><span class="section-number-4">30.4.1</span> step 1</h4>
<div class="outline-text-4" id="text-30-4-1">
<pre class="example" id="orgfe6e650">
                extraordinary income  ordinary expenses  ordinary income  special expenses
Agriculture     0                     0                  0                0               
Capital         0                     0                  0                0               
Employment      0                     0                  22000            0               
Exempt Capital  0                     0                  0                0               
Independent     0                     0                  0                0               
Other           0                     0                  0                0               
Rents           0                     0                  0                0               
Trade           0                     0                  0                0               

</pre>
</div>
</div>

<div id="outline-container-org7d4f480" class="outline-4">
<h4 id="org7d4f480"><span class="section-number-4">30.4.2</span> step 2</h4>
<div class="outline-text-4" id="text-30-4-2">
<pre class="example" id="orgd1b5fec">
                combined income  special expenses
Agriculture     0                0               
Capital         0                0               
Employment      22000            0               
Exempt Capital  0                0               
Independent     0                0               
Other           0                0               
Rents           0                0               
Trade           0                0               

</pre>
</div>
</div>

<div id="outline-container-orgb0d1f92" class="outline-4">
<h4 id="orgb0d1f92"><span class="section-number-4">30.4.3</span> step 3</h4>
<div class="outline-text-4" id="text-30-4-3">
<pre class="example" id="org59e91d5">
                net income
Agriculture     0         
Capital         0         
Employment      22000     
Exempt Capital  0         
Independent     0         
Other           0         
Rents           0         
Trade           0         

</pre>
</div>
</div>

<div id="outline-container-org4c038ed" class="outline-4">
<h4 id="org4c038ed"><span class="section-number-4">30.4.4</span> step 4</h4>
<div class="outline-text-4" id="text-30-4-4">
<pre class="example" id="orge7207ee">
                total taxable income
Agriculture     0                   
Capital         0                   
Employment      22000               
Exempt Capital  0                   
Independent     0                   
Other           0                   
Rents           0                   
Trade           0                   

</pre>
</div>
</div>

<div id="outline-container-org6e36051" class="outline-4">
<h4 id="org6e36051"><span class="section-number-4">30.4.5</span> step 5</h4>
<div class="outline-text-4" id="text-30-4-5">
<pre class="example" id="org3ce767d">
       total taxable income
total  22000               

</pre>
</div>
</div>

<div id="outline-container-org55dffcf" class="outline-4">
<h4 id="org55dffcf"><span class="section-number-4">30.4.6</span> step 6</h4>
<div class="outline-text-4" id="text-30-4-6">
<pre class="example" id="org8877bb7">
       total tax payable  total taxable income
total  2474               22000               

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2816988" class="outline-2">
<h2 id="org2816988"><span class="section-number-2">31</span> we choose EOFifth</h2>
<div class="outline-text-2" id="text-31">
<dl class="org-dl">
<dt>effectiveEOTaxMethod</dt><dd>we need to determine if there is aggregation of income. let's see if the different treatments matter. we will compare 34.1 with 2.3, considering the actual (test case3 - fired) and hypothetical (test case3 - unfired) scenarios</dd>
<dt>aggregationOfIncome</dt><dd>in the actual scenario, total taxable income is 152000.0 (and total tax payable is = 43149.77)</dd>
<dt>aggregationOfIncome</dt><dd>in the hypo   scenario, total taxable income is 22000.0 (and total tax payable is = 2474.3252)</dd>
<dt>aggregationOfIncome</dt><dd>actual &gt; hypo, returning true</dd>
<dt>squashIncomes</dt><dd>for Employment, extraordinary 130000.0 + ordinary 22000.0 - expenses 0.0 = pre-net 152000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 152000.0 exceeds 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will limit deductions to half of the sum of the negative incomes 0.0 = 0.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>and apply them pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 1.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Employment 152000.0 is positive, multiplying by 1.0 = 152000.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>sum of the positive incomes 22000.0 is less than 100000</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>so we will not limit deductions to half of the sum of the negative incomes; the deductible amount will be 0.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>we will apply deductions pro rata to the positive incomes</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>reductio = 1.0</dd>
<dt>offsetLosses<sub>2</sub><sub>3</sub><sub>3</sub></dt><dd>Employment 22000.0 is positive, multiplying by 1.0 = 22000.0</dd>
<dt>aggregationOfIncome</dt><dd>in the actual scenario, total taxable income is 152000.0 (and total tax payable is = 53867.016)</dd>
<dt>aggregationOfIncome</dt><dd>in the hypo   scenario, total taxable income is 22000.0 (and total tax payable is = 2474.3252)</dd>
<dt>aggregationOfIncome</dt><dd>actual &gt; hypo, returning true</dd>
<dt>effectiveEOTaxMethod</dt><dd>under treatment section 34.1, there is aggregation of income.</dd>
<dt>effectiveEOTaxMethod</dt><dd>under treatment section 2.3, there is aggregation of income.</dd>
<dt>effectiveEOTaxMethod</dt><dd>there is aggregation of income, so the one-fifths method is indicated.</dd>
</dl>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Wong Meng Weng</p>
<p class="date">Created: 2023-01-10 Tue 16:45</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
